<!DOCTYPE html>
<html lang="en, cn">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <link rel="manifest" href="/images/manifest.json">
  <meta name="msapplication-config" content="/images/browserconfig.xml">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.14.0/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css">

<script class="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"shuoo-24.github.io","root":"/","scheme":"Gemini","version":"8.0.0","exturl":false,"sidebar":{"position":"left","Pisces | Gemini":240,"padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}};
  </script>

  <meta name="description" content="ä¸–ç•ŒçŒ®æˆ‘ä»¥æ­Œ">
<meta property="og:type" content="website">
<meta property="og:title" content="Shuoçš„ç©ºé—´ç«™">
<meta property="og:url" content="http://shuoo-24.github.io/index.html">
<meta property="og:site_name" content="Shuoçš„ç©ºé—´ç«™">
<meta property="og:description" content="ä¸–ç•ŒçŒ®æˆ‘ä»¥æ­Œ">
<meta property="og:locale">
<meta property="article:author" content="Shuo">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://shuoo-24.github.io/">


<script class="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en, cn'
  };
</script>

  <title>Shuoçš„ç©ºé—´ç«™</title>
  






  <noscript>
  <style>
  body { margin-top: 2rem; }

  .use-motion .menu-item,
  .use-motion .sidebar,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header {
    visibility: visible;
  }

  .use-motion .header,
  .use-motion .site-brand-container .toggle,
  .use-motion .footer { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle,
  .use-motion .custom-logo-image {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line {
    transform: scaleX(1);
  }

  .search-pop-overlay, .sidebar-nav { display: none; }
  .sidebar-panel { display: block; }
  </style>
</noscript>

<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">
<!-- hexo injector head_end end --></head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Shuoçš„ç©ºé—´ç«™</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Lavender SpacecraftğŸªâœ¨</p>
      <img class="custom-logo-image" src="/source/images/favicon_io/apple-touch-icon.png" alt="Shuoçš„ç©ºé—´ç«™">
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags<span class="badge">5</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories<span class="badge">2</span></a>

  </li>
        <li class="menu-item menu-item-commonweal">

    <a href="/404/" rel="section"><i class="fa fa-heartbeat fa-fw"></i>Commonweal 404</a>

  </li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <section class="post-toc-wrap sidebar-panel">
      </section>
      <!--/noindex-->

      <section class="site-overview-wrap sidebar-panel">
        
      </section>
        <div class="back-to-top animated">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="reading-progress-bar"></div>

  <a href="https://github.com/shuoO-24" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">
      

      
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en, cn">
    <link itemprop="mainEntityOfPage" href="http://shuoo-24.github.io/2021/06/30/Number-Representation/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://ibb.co/d6rcNrG">
      <meta itemprop="name" content="Shuo">
      <meta itemprop="description" content="ä¸–ç•ŒçŒ®æˆ‘ä»¥æ­Œ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shuoçš„ç©ºé—´ç«™">
    </span>

    
    
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/06/30/Number-Representation/" class="post-title-link" itemprop="url">Number Representation</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2021-06-30 07:47:43 / Modified: 20:11:38" itemprop="dateCreated datePublished" datetime="2021-06-30T07:47:43-07:00">2021-06-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/UCB-61C/" itemprop="url" rel="index"><span itemprop="name">UCB-61C</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote>
<p>Reading Materials and Tutoring Online:</p>
<p><a target="_blank" rel="noopener" href="https://ryanstutorials.net/binary-tutorial/binary-negative-numbers.php#converting">Learn Binary Negative Numbers and 2â€™s Complement</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cs.cornell.edu/~tomf/notes/cps104/twoscomp.html">https://www.cs.cornell.edu/~tomf/notes/cps104/twoscomp.html</a></p>
<p><a target="_blank" rel="noopener" href="https://ncalculators.com/digital-computation/1s-2s-complement-calculator.htm">1â€™s &amp; 2â€™s Complement Calculator</a></p>
<p><a target="_blank" rel="noopener" href="https://hackmd.io/@sysprog/c-floating-point">ä½ æ‰€ä¸çŸ¥é“çš„ C èªè¨€: æµ®é»æ•¸é‹ç®—</a></p>
</blockquote>
<h2 id="ç‚ºä»€éº¼é›»è…¦ä¸ç”¨åé€²ä½è€Œç”¨äºŒé€²ä½ï¼Ÿ"><a href="#ç‚ºä»€éº¼é›»è…¦ä¸ç”¨åé€²ä½è€Œç”¨äºŒé€²ä½ï¼Ÿ" class="headerlink" title="ç‚ºä»€éº¼é›»è…¦ä¸ç”¨åé€²ä½è€Œç”¨äºŒé€²ä½ï¼Ÿ"></a>ç‚ºä»€éº¼é›»è…¦ä¸ç”¨åé€²ä½è€Œç”¨äºŒé€²ä½ï¼Ÿ</h2><p>A: signal çš„ voltage åªèƒ½åˆ†æˆ high å’Œ low â†’â†’ åªèƒ½æœ‰å…©ç¨®state</p>
<h3 id="é›»å­é›»è·¯"><a href="#é›»å­é›»è·¯" class="headerlink" title="é›»å­é›»è·¯"></a>é›»å­é›»è·¯</h3><ul>
<li>switch(n-type transistor):<ul>
<li>three terminals: the source, the gate, and the drain.</li>
<li>é–‹ï¼š<ol>
<li>åœ¨ gateåŠ é›»å£“ â†’ ç”¢ç”Ÿ electron channel åœ¨ source å’Œ drain ä¹‹é–“</li>
<li>åœ¨ source å’Œ drain ä¹‹é–“åŠ é›»ä½å·® â†’ ç”¢ç”Ÿé›»æµ</li>
</ol>
</li>
<li>é—œï¼šç§»é™¤ gate çš„é›»å£“</li>
</ul>
</li>
</ul>
<h3 id="æ•¸ä½é›»å­å­¸"><a href="#æ•¸ä½é›»å­å­¸" class="headerlink" title="æ•¸ä½é›»å­å­¸"></a>æ•¸ä½é›»å­å­¸</h3><ul>
<li>æœ‰äº†é–‹é—œå°±å¯ä»¥åšé‚è¼¯é–˜ï¼Œe.g. NAND gateï¼ŒNAND gate æ˜¯ function complete ï¼Œä»»ä½•ä¸€å€‹ boolean function éƒ½å¯ä»¥ç”¨ NAND gate çµ„åˆè¡¨ç¤ºå‡ºä¾†</li>
<li>æœ‰äº†é‚è¼¯é–˜å°±å¯ä»¥åšé‚è¼¯é›»è·¯ï¼Œä¹Ÿå¯ä»¥åšè¨˜æ†¶å…ƒä»¶</li>
</ul>
<hr>
<h2 id="Summary-of-Terminologies"><a href="#Summary-of-Terminologies" class="headerlink" title="Summary of Terminologies"></a>Summary of Terminologies</h2><ul>
<li><p><strong>Bit</strong></p>
<ul>
<li>The fundamental unit of memory inside a computer is called a <strong>bit</strong>, which is a contraction of the words <em>binary digit</em>.</li>
<li>Thus, <strong>a bit is a binary digit</strong>; i.e., a <em>0</em> or <em>1</em>.</li>
<li>Everything is stored on the computer in units of bits.</li>
<li>Because most data communications is serial in nature, most data communication and networking services indicate capacity in unit of bits per second; e.g., Ethernet operates at 10 million bits/sec (Mbps).</li>
<li>Some communication schemes, such as Fibre Channel, are parallel and describe capacity in terms of bytes/sec. but that is less common.</li>
</ul>
</li>
<li><p><strong>Byte</strong></p>
<ul>
<li>Byte is equivalent to <strong>8 bits</strong>, also called an <em>octet</em>.</li>
<li>Memory combines individual bits into larger units.</li>
<li>Computer media, including memory and disk drives, generally report their size in terms of bytes, such as 256 MB of RAM or a 120 GB hard drive.</li>
<li>A byte, historically, is a computer architecture term that refers to <strong>a memory storage of a single character.</strong></li>
</ul>
</li>
<li><p><strong>Radix</strong></p>
<ul>
<li>The standard digit set used for <strong>radix</strong>-r numbers is {0, 1, . . . , r â€“ 1}. This digit set leads to a unique representation for every natural number. The binary or rdix-2 digit set is {0, 1}<br>which is conveniently representable by electronic signals. Typically, low voltage is used to represent 0 and high voltage denotes 1, but the reverse polarity can also be used.<ul>
<li>Conceptually, the decimal digit values 0 through 9 could be represented by 10 different voltage levels. However, encoding everything with 0s and 1s makes it easier for electronic circuits to interpret and process the information speedily and reliably.</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>BCD (Binary-Coded Decimal)</strong></p>
<p>  One way to encode decimal digits using binary signals is to encode each of the digits 0-9 by means of its <strong>4-bit</strong> binary representation:</p>
<ul>
<li><p>The use of digit values 0 through r â€“ 1 in radix r is just a convention. We could use more than r digit values (for example, digit values â€“2 to 2 in radix 4) or use r digit values that do not start with 0 (for example, digit set {â€“1, 0, 1} in radix 3).</p>
<p>  <img src="https://tva1.sinaimg.cn/large/008i3skNgy1gs0ohxre4cj30b60ds0t5.jpg" alt="Number%20Representation%205ca9be94e956409fb9bc1e5274f7b048/Untitled.png" style="zoom: 33%;" /></p>
</li>
</ul>
</li>
<li><p><strong>Hexadecimal Notation</strong></p>
<ul>
<li>Simplifies notation of bit patterns.</li>
<li>Much better alternative, compared to binary number notation.</li>
<li>Simplifies notation of long binary strings, such as entire blocks of computer memory.</li>
<li>Hexadecimal notation is used <em>mainly for human convinience</em>.</li>
</ul>
</li>
<li><p>American Standard Code for Information Interchange (ASCII)</p>
<ul>
<li>ASCII is an 8-bit code with 256 characters</li>
<li><p>An 8-bit byte can accommodate up to 28, or $2^{56}$, characters.</p>
<p>  <img src="https://tva1.sinaimg.cn/large/008i3skNgy1gs0ohn5r0zj308j0avglv.jpg" alt="Number%20Representation%205ca9be94e956409fb9bc1e5274f7b048/Untitled%201.png"></p>
</li>
<li><p>represents upper- and lower-case letters, numerals, punctuation marks, and other symbols in an 8-bit byte.</p>
</li>
<li>For example, the 8-bit ASCII codes for the ten decimal digits are of the form 0011xxxx, where the â€œxxxxâ€ part is identical to the BCD code discussed earlier. ASCII digits take twice as much space as BCD digits and thus are not used in arithmetic units.</li>
</ul>
</li>
<li><p><strong>Number</strong>: a number from 0 to 255. But only the numbers 32 to 127 represent â€œprintable characters.â€</p>
</li>
<li><p><strong>Character</strong>:</p>
<ul>
<li>a symbol from the following set, called printable:</li>
<li>!â€#$%&amp;â€™()*+,-./0123456789:;&lt;=&gt;?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_`abcdefghijklmnopqrstuvwxyz{|}~   plus space and delete.</li>
</ul>
</li>
<li><p>16-bit Unicode</p>
</li>
<li><p><strong>Number Representation</strong></p>
<ul>
<li><strong>Unsigned</strong><ul>
<li>$[0, 2^{N-1}]$</li>
<li>(for N=32, $2^{N - 1} = 4,294,967,295$)</li>
</ul>
</li>
<li><strong>Sign and Magnitude</strong><ul>
<li>$[-(2^{N-1}-1), 2^{N-1}-1]$</li>
<li>2 zeros, 0 (1x0000) and +0 (0x0000)</li>
</ul>
</li>
<li><strong>Oneâ€™s Complement</strong><ul>
<li>$[-(2^{N-1}-1), 2^{N-1}-1]$</li>
<li>2 zeros</li>
</ul>
</li>
<li><strong>Twoâ€™s Complement</strong><ul>
<li>$[-(2^{N-1}), 2^{N-1}-1]$</li>
<li>(for N=32, $2^{N-1} - 1 = 2,147,483,647$)</li>
</ul>
</li>
<li><strong>Biased Encoding</strong><ul>
<li>$[\text{bias}, 2^N-1+\text{bias}]$</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>Sign and Magnitude</strong></p>
<ul>
<li><p>The set { . . . , â€“3, â€“2, â€“1, 0, 1, 2, 3, . . . } of integers is also referred to as signed or directed (whole) numbers. The most straightforward representation of integers consists of<br><strong>attaching a sign bit</strong> to any desired representation of natural numbers, leading to <strong>signed magnitude</strong> representation.</p>
</li>
<li><p>The standard convention is to use 0 for positive and 1 for<br>negative and attach the sign bit to the left end of the magnitude.</p>
</li>
<li><p>The problem with signed magnitude representations is that there are two representations for zero, namely -0 (1x0000) and +0 (0x0000). This makes arithmetic circuits compilcated. Hence, signed magnitude encoding was abandoned early in the development of computer arithmetic.</p>
</li>
</ul>
</li>
<li><p><strong>Bias Encoding</strong></p>
<ul>
<li><p>Another option for encoding signed integers in the range $[â€“N, P]$ is the biased representation. If we add the positive value N (the bias) to all numbers in the desired range, unsigned integers in the range $[0, P + N]$ result.</p>
</li>
<li><p>Any method for representing natural numbers in $[0, P + N]$ can then be used for representing the original signed integers in $[â€“N, P]$.</p>
</li>
<li><p><em>This type of biased representation has only limited application in encoding of the exponents in floating-point numbers.</em></p>
</li>
</ul>
</li>
<li><p><strong>2â€™s Complement</strong></p>
<ul>
<li><p>By far the most common machine encoding of signed integers is the 2â€™s-complement representation</p>
</li>
<li><p>In the k-bit 2â€™s-complement format, a negative value $â€“x$, with $x$ &gt; 0, is encoded as the unsigned number $2^k-x$</p>
</li>
</ul>
</li>
<li><p><strong>Overflow</strong></p>
<ul>
<li><p>Overflow occurs when there are <strong>insufficient bits</strong> in a binary number representation to portray the result of an arithmetic operation. Overflow occurs because computer arithmetic is not closed with respect to addition, subtraction, multiplication, or division. Overflow <strong>cannot</strong> occur in addition (subtraction), if the operands have <strong>different</strong> (resp. identical) signs.</p>
</li>
<li><p>To detect and compensate for overflow, one needs n+1 bits if an n-bit number representation is employed. For example, in 32-bit arithmetic, 33 bits are required to detect or compensate for overflow. This can be implemented in addition (subtraction) by letting a carry (borrow) occur into (from) the sign bit.</p>
</li>
</ul>
</li>
</ul>
<h2 id="Data-Input-Analog-â€”-Digital"><a href="#Data-Input-Analog-â€”-Digital" class="headerlink" title="Data Input Analog â€” Digital"></a>Data Input Analog â€” Digital</h2><ol>
<li><strong>Sample</strong><ul>
<li>We divide music into tiny intervals, like for a CD, there are 44100s in one second.</li>
<li>We ask what the height of the signal is.</li>
</ul>
</li>
<li><strong>Quantize</strong><ul>
<li>Then we divide the height into quantized number, dividing up the signal in its aptitude.</li>
<li>For every one of these samples, we figure out where, on a 16-bit (65536 tic-mark) â€œ<em>yarstick</em>â€œ, it lies.</li>
</ul>
</li>
</ol>
<p>We can also use <a target="_blank" rel="noopener" href="http://hof.povray.org/">hof.povray.org</a> to create beautiful digital pictures</p>
<hr>
<h2 id="Bit-can-represent-anything"><a href="#Bit-can-represent-anything" class="headerlink" title="Bit can represent anything"></a>Bit can represent anything</h2><h3 id="bit"><a href="#bit" class="headerlink" title="bit"></a>bit</h3><ul>
<li>a single binary digit, either zero or one.</li>
</ul>
<h3 id="byte"><a href="#byte" class="headerlink" title="byte"></a>byte</h3><ul>
<li>8 bits, can represent positive numbers from 0 to 255.</li>
</ul>
<h3 id="Great-Idea"><a href="#Great-Idea" class="headerlink" title="Great Idea"></a>Great Idea</h3><ul>
<li>Computers can only represent numbers in base 2.</li>
<li><p>We can use bits to repersent everything:</p>
<ul>
<li><strong>Characters:</strong><ul>
<li>26 letters â†’ (at least) 5 bits â†’ $2^5$ representations</li>
</ul>
</li>
<li><p><strong>Upper/lower case, punctuation:</strong></p>
<ul>
<li>7 bits (in 8)</li>
<li><p><strong>ASCII</strong></p>
<ul>
<li><p><em>Why 7-bits?</em></p>
<p>  The original ASCII code provides 128 difference characters has 7 digits. ASCII and 7-bit ASCII are synonymous. Since the 8-bit byte is the common storage element, ASCII leaves room for 128 additional characters, which are used to represent a host of foreign language and other symbols: </p>
<p>  <img src="https://tva1.sinaimg.cn/large/008i3skNgy1gs0ohhzvuuj30b60hwmyd.jpg" alt="Number%20Representation%205ca9be94e956409fb9bc1e5274f7b048/Untitled%202.png"></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://www.sciencebuddies.org/science-fair-projects/references/ascii-table">ASCII Table</a></p>
<p>  <a target="_blank" rel="noopener" href="https://www.sciencebuddies.org/science-fair-projects/references/ascii-table">https://www.sciencebuddies.org/science-fair-projects/references/ascii-table</a></p>
</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>Unicode â€” standard code to cover all the worldâ€™s languagues:</strong></p>
<ul>
<li>8, 16, 32 bits</li>
</ul>
</li>
<li><strong>Logical Values</strong><ul>
<li>0 â€” False</li>
<li>1 â€” True</li>
</ul>
</li>
<li><strong>Color</strong><ul>
<li>Eg. Red(00), Green(01), Blue(11)</li>
</ul>
</li>
<li>We can also design it to store other informations, like locations, addresses, commands</li>
</ul>
</li>
</ul>
<h3 id="Key-Takeaway"><a href="#Key-Takeaway" class="headerlink" title="Key Takeaway"></a><strong>Key Takeaway</strong></h3><ul>
<li>$N$ bits â†â†’ $2^N$ things<ul>
<li>i.e. If we have $x$ things, we need to take a $log_2$ of that number and ceil it to get the number of bits it needs.</li>
</ul>
</li>
<li>The number of digits needed to represent $n$ in base $b$<br>is at least: $log_b(n+1)$</li>
</ul>
<hr>
<h2 id="Base-Conversion"><a href="#Base-Conversion" class="headerlink" title="Base Conversion"></a>Base Conversion</h2><h3 id="Binary-Decimal-Hex"><a href="#Binary-Decimal-Hex" class="headerlink" title="Binary, Decimal, Hex"></a>Binary, Decimal, Hex</h3><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gs0ojmkk7oj30ty0cudrl.jpg" alt=""></p>
<ul>
<li><p><strong>Relationship between decimal, hexadecimal and binary</strong></p>
<p>  <a target="_blank" rel="noopener" href="https://www.notion.so/bb87049a052940d1b442f69c60cca337">relationship between decimal, hexadecimal and binary</a></p>
</li>
<li><p><strong>Representation in base b uses digits:</strong></p>
<ul>
<li>$\{0, 1, 2, 3, \cdots, b - 1\}$</li>
</ul>
</li>
</ul>
<h3 id="Theorem-of-converting-any-base-into-decimal"><a href="#Theorem-of-converting-any-base-into-decimal" class="headerlink" title="Theorem of converting any base into decimal"></a><strong>Theorem of converting any base into decimal</strong></h3><ul>
<li><p>Fix an integer b &gt; 1. Any nonnegative integer n can be expressed uniquely as:<br>$n = a_kÂ·b^k + a_{k-1}Â·b^{k-1} + â€¦. + a_1Â·b^1 + a_0Â·b^0$</p>
</li>
<li><p>Each $a^j$ is an integer digit in the range $\{0,1,â€¦,b-1\}$ and $a_kâ‰  0$.</p>
</li>
<li><p><strong>Example:</strong></p>
<ul>
<li>$(612)_7 = 6Â·7^2 + 1Â·7^1 + 2Â·7^0 = 303$</li>
</ul>
</li>
</ul>
<h3 id="Decimal"><a href="#Decimal" class="headerlink" title="Decimal"></a>Decimal</h3><ul>
<li><p>To represent the positive integer one hundred and twenty-five as a decimal number, we can write (with the postivie sign implied). The subscript 10 denotes the number as a base 10 (decimal) number:</p>
<p>  $125_{10} = 1\cdot100 + 2\cdot10 + 5\cdot1 = 1\cdot102 + 2\cdot101 + 5\cdot10$</p>
</li>
<li><p>Tally counting: çŠ¯äººåœ¨ç›‘ç‹±é‡Œç”»çº¿è®¡æ•° â†’ <strong>base 1</strong></p>
<ul>
<li>When we count it, itâ€™s in base 10</li>
</ul>
</li>
</ul>
<h3 id="Binary-to-Decimal-Hexadecimal"><a href="#Binary-to-Decimal-Hexadecimal" class="headerlink" title="Binary to Decimal/Hexadecimal"></a>Binary to Decimal/Hexadecimal</h3><ol>
<li>Left pad zeros until you have groups of 4</li>
<li>Convert each group of 4 from binary to hex</li>
</ol>
<ul>
<li>Writing as $0b1101$ or $1101_2$</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gs0oh23mlqj31a405wt9e.jpg" alt="image-20210630024826735"></p>
<p>Imagine there are boxes with numbers indicated number of eggs every box can hold, $1$ means the box is full and $0$ means the box is empty. We can count the number of eggs to convert binary numbers into decimal numbers.</p>
<p><a target="_blank" rel="noopener" href="https://www.notion.so/7937e47baa9f4a44a653a0c90e2452fa">Copy of The value of bits in hexadecimal numbers</a></p>
<h3 id="Hexadecimal"><a href="#Hexadecimal" class="headerlink" title="Hexadecimal"></a>Hexadecimal</h3><ul>
<li>$\{0, 1, 2, 3, 4, 5, 6, 7, 8, 9, A, B, C, D, E, F\}$</li>
<li>$A = 10, B = 11, C = 12, D = 13, E = 14, F = 15$</li>
<li>Writing as $0\text{xA}5$ or $\text{A}5_{16}$</li>
<li>In this way <strong>a byte can be represented by two hexadecimal digits</strong></li>
</ul>
<h3 id="Decimal-to-Binary"><a href="#Decimal-to-Binary" class="headerlink" title="Decimal to Binary"></a>Decimal to Binary</h3><ul>
<li>Go through columns from left to right</li>
<li>First, find the leftmost column that has number â‰¤ number $n$</li>
<li>Then, if $n$ cannot fill in that box (&lt; that column number), we put a $0$ inside that column</li>
<li>Repeat the last process for the rest of the columns from left to right</li>
</ul>
<h3 id="Decimal-to-Hexadecimal"><a href="#Decimal-to-Hexadecimal" class="headerlink" title="Decimal to Hexadecimal"></a>Decimal to Hexadecimal</h3><ul>
<li>Go through columns from left to right</li>
<li>First, find the leftmost column that has number â‰¤ number $n$</li>
<li>Then, we put <strong>number of columns that can be filled by</strong> $n$, substract <strong>col * number of columns</strong> from $n$</li>
<li>If not, put $0$ and keep going</li>
<li>Keep going to the rightmost column</li>
</ul>
<h3 id="Binary-to-Hexadecimal"><a href="#Binary-to-Hexadecimal" class="headerlink" title="Binary to Hexadecimal"></a>Binary to Hexadecimal</h3><p>Memorize the table:</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>Hexadecimal</th>
<th>Decimal</th>
<th>Binary</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>2</td>
<td>2</td>
<td>10</td>
</tr>
<tr>
<td>3</td>
<td>3</td>
<td>11</td>
</tr>
<tr>
<td>4</td>
<td>4</td>
<td>100</td>
</tr>
<tr>
<td>5</td>
<td>5</td>
<td>101</td>
</tr>
<tr>
<td>6</td>
<td>6</td>
<td>110</td>
</tr>
<tr>
<td>7</td>
<td>7</td>
<td>111</td>
</tr>
<tr>
<td>8</td>
<td>8</td>
<td>1000</td>
</tr>
<tr>
<td>9</td>
<td>9</td>
<td>1001</td>
</tr>
<tr>
<td>A</td>
<td>10</td>
<td>1010</td>
</tr>
<tr>
<td>B</td>
<td>11</td>
<td>1011</td>
</tr>
<tr>
<td>C</td>
<td>12</td>
<td>1100</td>
</tr>
<tr>
<td>D</td>
<td>13</td>
<td>1101</td>
</tr>
<tr>
<td>E</td>
<td>14</td>
<td>1110</td>
</tr>
<tr>
<td>F</td>
<td>15</td>
<td>1111</td>
</tr>
</tbody>
</table>
</div>
<ul>
<li>First, go from <strong>right to left</strong></li>
<li>We can choose to <strong>left-pad</strong> with $0s$ to make full <strong>4-bits values</strong>, then look up every 4-bits in the table</li>
<li>Or we can directly convert every 4-bits from <strong>right to left</strong> in the original binary number</li>
</ul>
<h3 id="Hexadecimal-to-Binary"><a href="#Hexadecimal-to-Binary" class="headerlink" title="Hexadecimal to Binary"></a>Hexadecimal to Binary</h3><ol>
<li>Expand each hexadecimal digit to binary digits</li>
<li>Remove leftmost (leading) zeros</li>
</ol>
<ul>
<li><p>ğŸ¤£ Joke: <em>Every Base is Base 10</em></p>
<p>  <em>In the base ten system, the farthest right place is the ones place, the place one to the left is the tens place, one to the left of that is the hundreds (ten squared) place, and so on. In base two, the farthest right place is for ones, the next one to the left is for the twos, the one to the left of that is for fours (two squared), and so on. In base two, the number two is 10.</em></p>
<p>  <em>Thatâ€™s how bases work in general. In base sixteen, the number sixteen is 10. In base twenty, the number twenty is 10. In base sixty, the number sixty is 10. So â€œbase 10â€ means absolutely nothing, and I find that hilarious.</em></p>
</li>
</ul>
<hr>
<h2 id="Nibble-and-Byte"><a href="#Nibble-and-Byte" class="headerlink" title="Nibble and Byte"></a>Nibble and Byte</h2><hr>
<h3 id="Nibble-4-Bits"><a href="#Nibble-4-Bits" class="headerlink" title="Nibble/4 Bits"></a>Nibble/4 Bits</h3><ul>
<li>One nibble is 4 bits, half of a byte.</li>
<li>One <strong>hex digit</strong> = 16 things</li>
</ul>
<h3 id="Byte-8-Bits"><a href="#Byte-8-Bits" class="headerlink" title="Byte/8 Bits"></a>Byte/8 Bits</h3><ul>
<li>One byte is 8 bits</li>
<li>Two <strong>hex digits</strong> = 256 things</li>
<li><strong>RGB Color</strong><ul>
<li>Color is usually composed of <strong>6 hex digits (two for each component)</strong><ol>
<li>RED 0-255</li>
<li>GREEN 0-255</li>
<li>BLUE 0-255</li>
</ol>
</li>
</ul>
</li>
</ul>
<hr>
<h2 id="Arithematics"><a href="#Arithematics" class="headerlink" title="Arithematics"></a>Arithematics</h2><p>We can <strong>add, substract, multiply, divide, compare</strong> them</p>
<h3 id="Addition"><a href="#Addition" class="headerlink" title="Addition"></a>Addition</h3><ul>
<li>0 + 0 = 0</li>
<li>0 + 1 = 1</li>
<li>1 + 0 = 1</li>
<li>1 + 1 = 10 (which is 0 carry 1)</li>
<li>1 + 1 + 1 = 11</li>
</ul>
<h3 id="Subtraction"><a href="#Subtraction" class="headerlink" title="Subtraction"></a>Subtraction</h3><ul>
<li>1 - 1 = 0</li>
<li>0 - 1 = 1 (put â€œ-1â€ to next bit)</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gs0ogvns8nj306w05674q.jpg" alt="Number%20Representation%205ca9be94e956409fb9bc1e5274f7b048/Untitled%204.png"></p>
<p>3rd bit carry -1, so å‡æ•°0è¢«å€Ÿå»1ï¼Œå˜æˆ1ï¼Œ1 - 1 = 0, 3rd bit result is 0ï¼›0è¢«å‡å»ä¹‹å‰è¦æ‰¾å‰é¢çš„1å€Ÿ1ï¼Œæ‰€ä»¥å‡æ•°4th bit 1 - 1 = 0ï¼Œç»“æœä¸º0</p>
<h3 id="Multiplication"><a href="#Multiplication" class="headerlink" title="Multiplication"></a>Multiplication</h3><p>Same procedure as base 10 multiplication</p>
<hr>
<h2 id="Overflow"><a href="#Overflow" class="headerlink" title="Overflow"></a>Overflow</h2><p>When the magnitude of the result is too big to fit into result representation. </p>
<ul>
<li><strong>Numeral</strong> are <strong>representations</strong> of numbers (an abstraction)</li>
<li><p>Digits of <strong>numeral</strong>, not numbers</p>
</li>
<li><p>There can be overflow only if signs of two numbers are same, and sign of sum is opposite to the signs of numbers.</p>
</li>
<li>When the numeral reaches <strong>maximum or minimum</strong>, adding or subtracting from it will result in <strong>overflow</strong>.</li>
<li>Overï¬‚ow errors only occur when the correct result of the addition falls outside the range of $[âˆ’(2^{nâˆ’1} ), 2^{nâˆ’1} âˆ’ 1]$. Adding numbers of opposite signs will not result in numbers outside of this range.</li>
<li>In most modern systems, the value doesnâ€™t actually overflow into adjacent memory bits but is <strong>wrapped</strong> <strong>around</strong> or truncated using a modulo operation to fit in the variable.</li>
<li>The most common result of an overflow is that the least significant representable digits of the result are stored; the result is said to wrap around the maximum (i.e. modulo a power of the radix, usually two in modern computers, but sometimes ten or another radix).</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gs0l996r7uj31400u0qv5.jpg" alt="Number%20Representation%205ca9be94e956409fb9bc1e5274f7b048/IMG_7655.png" style="zoom:50%;" /></p>
<h3 id="Overflow-of-Unsigned"><a href="#Overflow-of-Unsigned" class="headerlink" title="Overflow of Unsigned"></a>Overflow of Unsigned</h3><ul>
<li>$1 + 255 = 0$</li>
<li>Handling â€” modulo power of two</li>
</ul>
<h3 id="Overflow-of-Signed"><a href="#Overflow-of-Signed" class="headerlink" title="Overflow of Signed"></a>Overflow of Signed</h3><ul>
<li>undefined behavior</li>
</ul>
<h3 id="Overflow-in-Bias-Form"><a href="#Overflow-in-Bias-Form" class="headerlink" title="Overflow in Bias Form"></a>Overflow in Bias Form</h3><ul>
<li>$1 + 128 = -127$</li>
<li>The result of addition wraps around, so the result of <strong>adding two numbers</strong> with the <strong>same signs</strong> will have the results in <strong>opposite sign</strong>.</li>
</ul>
<h3 id="Overflow-in-Twoâ€™s-Complement"><a href="#Overflow-in-Twoâ€™s-Complement" class="headerlink" title="Overflow in Twoâ€™s Complement"></a>Overflow in Twoâ€™s Complement</h3><p>If 2 Twoâ€™s Complement numbers are added, and they both have the same sign (both positive or both negative), then overflow occurs if and only if the result has the opposite sign. Overflow never occurs when adding operands with different signs.</p>
<h3 id="Check-for-Integer-Overflow"><a href="#Check-for-Integer-Overflow" class="headerlink" title="Check for Integer Overflow"></a>Check for Integer Overflow</h3><h4 id="Method-1"><a href="#Method-1" class="headerlink" title="Method 1"></a>Method 1</h4><ol>
<li>Calculate sum</li>
<li>If both numbers are positive and sum is negative then return -1<br> Else<pre><code>If both numbers are negative and sum is positive then return -1
Else return 0
</code></pre></li>
</ol>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">addOvf</span><span class="params">(<span class="keyword">int</span>* result, <span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    *result = a + b; </span><br><span class="line">    <span class="keyword">if</span>(a &gt; <span class="number">0</span> &amp;&amp; b &gt; <span class="number">0</span> &amp;&amp; *result &lt; <span class="number">0</span>) </span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>; </span><br><span class="line">    <span class="keyword">if</span>(a &lt; <span class="number">0</span> &amp;&amp; b &lt; <span class="number">0</span> &amp;&amp; *result &gt; <span class="number">0</span>) </span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>; </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Method-2"><a href="#Method-2" class="headerlink" title="Method 2"></a>Method 2</h4><p>Thanks to Himanshu Aggarwal for adding this method. This method doesnâ€™t modify *result if there us an overflow.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;limits.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line">  </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">addOvf</span><span class="params">(<span class="keyword">int</span>* result, <span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   <span class="keyword">if</span>( a &gt; INT_MAX - b)</span><br><span class="line">     <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">   &#123;</span><br><span class="line">     *result = a + b;</span><br><span class="line">      <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> *res = (<span class="keyword">int</span> *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">int</span>));</span><br><span class="line">  <span class="keyword">int</span> x = <span class="number">2147483640</span>;</span><br><span class="line">  <span class="keyword">int</span> y = <span class="number">10</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, addOvf(res, x, y));</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">&quot;\n %d&quot;</span>, *res);</span><br><span class="line">  getchar();</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="Unsigned-In-C"><a href="#Unsigned-In-C" class="headerlink" title="Unsigned In C"></a>Unsigned In C</h2><p>C: <code>unsigned int</code></p>
<p>C18: <code>uintN_t</code> (N is the width of the numeral)</p>
<p>(for N=32, $2^{N - 1} = 4,294,967,295$)</p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gs0l8h84smj30go0fy0ud.jpg" alt="Number%20Representation%205ca9be94e956409fb9bc1e5274f7b048/Untitled%205.png" style="zoom: 33%;" /></p>
<blockquote>
<p>The same bits can be interpreted in many diï¬€erent ways with the exact same bits! It can be from an unsigned number to a signed number or even a program. It is all dependent on your interpretation.</p>
</blockquote>
<h2 id="Complement-the-bits"><a href="#Complement-the-bits" class="headerlink" title="Complement the bits"></a>Complement the bits</h2><ul>
<li><em>Generally, there are two types of complement of Binary number: 1â€™s complement and 2â€™s complement.</em></li>
</ul>
<h3 id="Binaryâ€™s-Sign"><a href="#Binaryâ€™s-Sign" class="headerlink" title="Binaryâ€™s Sign"></a>Binaryâ€™s Sign</h3><ul>
<li>for zero, use all 0â€™s.</li>
<li><p>for positive integers, start counting up, with a maximum of 21.</p>
<p>  (number of bits - 1)</p>
</li>
<li><p>for negative integers, do exactly the same thing, but <strong>switch the role of 0â€™s and 1â€™s</strong> (so instead of starting with 0000, start with 1111 - thatâ€™s the â€œcomplementâ€ part).</p>
</li>
<li>Doing this, the <strong>first bit gets the role of the â€œsignâ€ bit</strong>, as it can be used to distinguish between nonnegative and negative decimal values. If the most significant bit is 1, then the binary can be said to be negative, where as if the most significant bit (the leftmost) is 0, you can say the decimal value is nonnegative.</li>
</ul>
<h2 id="Sign-and-Magnitude"><a href="#Sign-and-Magnitude" class="headerlink" title="Sign and Magnitude"></a>Sign and Magnitude</h2><p>We use one digit to represent signs:</p>
<ul>
<li><strong>1 â†’ signed -</strong></li>
<li><strong>0 â†’ unsigned +</strong></li>
</ul>
<p>This is called <strong>sign and magnitude</strong></p>
<ul>
<li>If we want to represent <strong>negative</strong> numbers, we just need to <strong>flip the sign (complement the most significant figure)</strong></li>
<li>Range: $[-(2^{n-1}), 2^{n-1}]$<ul>
<li><strong>Example</strong>: 8-bits</li>
</ul>
</li>
</ul>
<p>If we want to represent a number in n number of bits:</p>
<ul>
<li>the <strong>first bit</strong> always represents the sign of the number. i.e. 0 for a positive number and 1 for a negative number.</li>
<li><strong>the remaining bits (n-1) represent the magnitude of the number in Binary.</strong></li>
<li><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Signed_number_representations#Signed_magnitude_representation">â€œSign-magnitudeâ€</a> negative numbers just have the sign bit flipped of their positive counterparts, but this approach has to deal with interpreting <code>1000</code> (one <code>1</code> followed by all <code>0</code>s) as â€œnegative zeroâ€ which is confusing.</li>
</ul>
<p>Remember to check whether the length of bits is enough to hold that decimal number, if not, <strong>overflow</strong> will occur.</p>
<p>Remember to pad 0s at the front to make the bit length.</p>
<h2 id="Oneâ€™s-Complement-åç "><a href="#Oneâ€™s-Complement-åç " class="headerlink" title="Oneâ€™s Complement åç "></a>Oneâ€™s Complement åç </h2><ul>
<li>To get 1â€™s complement of a binary number, simply <strong>invert the given number</strong>.</li>
<li>Range: $[-(2^{n-1}), 2^{n-1}]$</li>
<li>Positive values in oneâ€™s complement are the same as unsigned binary or sign-magnitude.</li>
<li><p>But for <strong>negative values</strong>, we first represent the value with <strong>positive sign</strong> and then take the <strong>oneâ€™s complement of it.</strong></p>
<ul>
<li><p><strong>Example:</strong></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gs0l8vp3atj30gh04d74i.jpg" alt="Number%20Representation%205ca9be94e956409fb9bc1e5274f7b048/Untitled%206.png"></p>
</li>
</ul>
</li>
<li><p><strong>Note</strong>: <strong>positive</strong> number has leading 0s; <strong>negative</strong> number has leading 1s</p>
</li>
<li><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Ones%27_complement">â€œOnesâ€™ complementâ€</a> negative numbers are just the bit-complement of their positive counterparts, which also leads to a confusing <strong>â€œnegative zeroâ€</strong> with <code>1111</code> (all ones).</li>
</ul>
<h3 id="To-Represent-Sign"><a href="#To-Represent-Sign" class="headerlink" title="To Represent Sign"></a>To Represent Sign</h3><p>There is no specific bit to represent the sign, but the MSB (Most Significant Bit) can be used to determine the sign of the number. i.e. MSB is 0 if the number is positive and 1 if the number is negative. Binary numbers are used and also a specific bit size is used. (e.g. 8, 16, 32, etc. bits).</p>
<ol>
<li>If the number is positive<ul>
<li>Convert the number to binary</li>
<li>Set the number to specific bit size</li>
</ul>
</li>
<li>If the number is negative<ul>
<li>Convert the number to binary</li>
<li>Set the number to specific bit size</li>
<li>Get the complement of that value</li>
</ul>
</li>
</ol>
<h3 id="Conversion"><a href="#Conversion" class="headerlink" title="Conversion"></a>Conversion</h3><p>To form a twoâ€™s complement number that is negative you simply take the corresponding positive number, invert all the bits, and add 1. </p>
<ul>
<li><strong>Invert: 0 â†’ 1, 1 â†’ 0</strong></li>
</ul>
<p><strong>Example:</strong> </p>
<ul>
<li>The example below illustrated this by forming the number negative 35 as a twoâ€™s complement integer:<ul>
<li>$35_{10} = 0010 0011_2$</li>
<li>$\text{invert} \rightarrow 1101 1100_2$</li>
<li>$\text{add}\; 1 \rightarrow 1101 1101_2$</li>
<li>So 1101 1101 is our <strong>twoâ€™s complement representation</strong> of -35. We can check this by adding up the contributions from the individual bits:<br>$1101 1101_2 = -128 + 64 + 0 + 16 + 8 + 4 + 0 + 1 = -35$</li>
</ul>
</li>
</ul>
<h2 id="Shortcomings-of-Oneâ€™s-Complement-Sign-amp-Magnitude"><a href="#Shortcomings-of-Oneâ€™s-Complement-Sign-amp-Magnitude" class="headerlink" title="Shortcomings of Oneâ€™s Complement (Sign &amp; Magnitude)"></a>Shortcomings of Oneâ€™s Complement (Sign &amp; Magnitude)</h2><h3 id="Binary-Odometer"><a href="#Binary-Odometer" class="headerlink" title="Binary Odometer"></a>Binary Odometer</h3><ul>
<li><p>We can use five fingers (one hand) to represent binary numerals and count them continuously from 0 to 31:</p>
<p>  <img src="https://tva1.sinaimg.cn/large/008i3skNgy1gs0l8mnzuuj30go0fy0ud.jpg" alt="Number%20Representation%205ca9be94e956409fb9bc1e5274f7b048/Untitled%207.png" style="zoom: 33%;" /></p>
<p>  But with signed numbers, we need to reverse the order of counting for the left of the numerals.</p>
<ul>
<li><strong>Signed binary odometer:</strong> The leftmost bit is used for the sign, which leaves seven bits for the magnitude. The magnitude uses 7-bit unsigned binary, which can represent 010 (as 000 0000) up to 12710 (as 111 1111). The eighth bit makes these positive or negative, resulting in -12710, â€¦ -0, 0, â€¦ 12710.</li>
</ul>
</li>
<li><p>Incremet binary odometer sometimes <strong>increase</strong> values, sometimes <strong>decrease</strong> values</p>
<p>  <img src="https://tva1.sinaimg.cn/large/008i3skNgy1gs0l7zuwukj31cy0ru7wh.jpg" alt="Number%20Representation%205ca9be94e956409fb9bc1e5274f7b048/Untitled%208.png" style="zoom: 50%;" /></p>
</li>
<li><p>There are <strong>two zeros</strong>: â€” two zeros(00000 and 11111) overlap</p>
<ul>
<li>â€œminus zeroâ€, 1000 0000</li>
<li>â€œplus zeroâ€, 0000 0000</li>
</ul>
</li>
<li>We can simply shift the left odometer by one â€” there exists a better solution; thus oneâ€™s complement was <strong>abandoned</strong> eventually. â†’ twoâ€™s complement</li>
</ul>
<hr>
<h2 id="Twoâ€™s-Complement-è¡¥ç "><a href="#Twoâ€™s-Complement-è¡¥ç " class="headerlink" title="Twoâ€™s Complement è¡¥ç "></a>Twoâ€™s Complement è¡¥ç </h2><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gs0l7ppmo6j30x00fwmz6.jpg" alt="Number%20Representation%205ca9be94e956409fb9bc1e5274f7b048/Untitled%209.png"></p>
<p><img src="https://www.electronicshub.org/wp-content/uploads/2015/04/Table-2.jpg" alt="Signed Binary Numbers"></p>
<p>Table: <a target="_blank" rel="noopener" href="https://www.notion.so/d1d8a6053a2d4197bf42ffab2924d893">Table for twoâ€™s complement</a></p>
<p>To get 2â€™s complement of binary number is <strong>1â€™s complement</strong> of given number <strong>plus 1</strong> to the least significant bit (LSB).</p>
<ul>
<li><p>This representation technique is very much similar to Oneâ€™s Complement Representation. The main difference is that when the number is negative, 1 is added to the LSB (Least Significant Bit) after getting the complement.</p>
<p>  If the number is positive then we may convert the same way we would for <a target="_blank" rel="noopener" href="https://ryanstutorials.net/binary-tutorial/binary-conversions.php#d2b">unsigned binary</a>. We must, however, pad out with 0â€™s to the required number of bits. eg. if we are working with 8 bits and we need to represent 6 then:</p>
<ul>
<li>Decimal 6 translates into binary as <strong>110</strong></li>
<li>Padding out this becomes <strong>00000110</strong></li>
<li>$(+25)_{10}$<ul>
<li>Convert the number to binary -&gt; $(11001)^2$</li>
<li>Set the number to specific bit size -&gt; (0001 1001)</li>
</ul>
</li>
<li>$(-25)_{10}$<ul>
<li>Convert the number to binary -&gt; (11001)2</li>
<li>Set the number to specific bit size -&gt; (0001 1001)</li>
<li>Get the complement of that value -&gt; (1110 0110)</li>
<li>Add 1 to LSB -&gt; (1110 0110) + 1 = (1110 0111)</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>Take oneâ€™s complement and then add 1 to it. (shift the left odometer by 1)</p>
<ul>
<li><p>Range: $[-(2^{n-1}), 2^{n-1} - 1]$</p>
</li>
<li><p>$2^{N-1}$ non-negatives</p>
</li>
<li><p>$2^{N-1}$ negatives</p>
</li>
<li><p>One more negative than positive</p>
</li>
<li><p>$1$ zero</p>
</li>
<li><p><strong>Example:</strong> for 8 bits, $[0b01111111, 0b10000000]$, $[-128, 127]$</p>
<p>  <img src="https://tva1.sinaimg.cn/large/008i3skNgy1gs0l4v5sdxj310w0l84e2.jpg" alt="Number%20Representation%205ca9be94e956409fb9bc1e5274f7b048/Untitled%2011.png" style="zoom:50%;" /></p>
</li>
<li><p>C99: <code>intN_t</code></p>
</li>
<li><p><strong>Example</strong>: flip -3 to 3 to -3 in a nibble</p>
</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gs0l4rjwdfj30fq09caec.jpg" alt="Number%20Representation%205ca9be94e956409fb9bc1e5274f7b048/Untitled%2012.png" style="zoom: 33%;" /></p>
<h3 id="Property"><a href="#Property" class="headerlink" title="Property"></a>Property</h3><p>Positive (negative) numbers can have infinitely many leading zeroes (ones). Twos complement numbers have some interesting properties, for example, the negation property. Let xâ€™ denote the negation of binary number x (e.g., if x = 1010, then xâ€™ = 0101). The following assertion holds:</p>
<h3 id="Advantages"><a href="#Advantages" class="headerlink" title="Advantages"></a>Advantages</h3><p>Twoâ€™s complement numbers are excellent for representing equal number of positive and negative numbers for a fixed number of bits</p>
<ul>
<li>Only has one zero</li>
<li>It simplifies math. Try adding 2 (0010) and -2 (1110) together and you get 10000. The most significant bit is overflow, so the result is actually 0000. Almost like magic, 2 + -2 = 0.</li>
</ul>
<h3 id="Overflow-1"><a href="#Overflow-1" class="headerlink" title="Overflow"></a>Overflow</h3><p>If 2 Twoâ€™s Complement numbers are added, and they both <strong>have the same sign (both positive or both negative), then overflow occurs if and only if the result has the opposite sign</strong>. Overflow <strong>never</strong> occurs when adding operands with <strong>different signs</strong>.</p>
<p>Overflow occurs when a transition is made</p>
<ul>
<li>from $+2^{nâˆ’1}-1$ to $âˆ’2^{n-1}$ when adding</li>
<li>from $âˆ’2^{n-1}$ to $+2^{nâˆ’1}-1$ when subtracting</li>
</ul>
<h3 id="Intuitive-Understanding"><a href="#Intuitive-Understanding" class="headerlink" title="Intuitive Understanding"></a>Intuitive Understanding</h3><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gs0g2q351fj60y80bwmy802.jpg" alt="Number%20Representation%205ca9be94e956409fb9bc1e5274f7b048/Untitled%2013.png"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gs0g2u5eztj30xk0cu0u3.jpg" alt="Number%20Representation%205ca9be94e956409fb9bc1e5274f7b048/Untitled%2014.png" style="zoom:67%;" /></p>
<h3 id="Converting-Twoâ€™s-Complement-to-Decimal"><a href="#Converting-Twoâ€™s-Complement-to-Decimal" class="headerlink" title="Converting Twoâ€™s Complement to Decimal"></a>Converting Twoâ€™s Complement to Decimal</h3><p><strong>Example:</strong> Converting 1111 to decimal:</p>
<ol>
<li>The number starts with 1, so itâ€™s negative, so we find the <strong>complement</strong> of 1111, which is 0000.</li>
<li><strong>Add 1</strong> to 0000, and we obtain 0001.</li>
<li><strong>Convert 0001 to decimal</strong>, which is 1.</li>
<li><strong>Apply the sign = -1</strong></li>
</ol>
<h3 id="Range"><a href="#Range" class="headerlink" title="Range"></a>Range</h3><ul>
<li><p>Twoâ€™s complement essentially takes one bit away from the value for use as a sign bit. Since we have one fewer binary digit, the maximum value is 1/2 what it would be for an unsigned number with the same number of bits.</p>
</li>
<li><p>The largest positive value in N-bit twoâ€™s complement is 0111â€¦111, which is 2N-1-1.</p>
</li>
<li><p>The smallest negative value in N-bit twoâ€™s complement is 1000â€¦000, which is -2N-1.</p>
</li>
<li><p><strong>Table 4.4. Twoâ€™s Complement Integer Ranges</strong></p>
<p><a target="_blank" rel="noopener" href="https://www.notion.so/65ca51ef24e242bb9c2b9f471c0e94bf">Copy of 2â€™s Complement Bit Range</a></p>
</li>
</ul>
<h3 id="Addition-1"><a href="#Addition-1" class="headerlink" title="Addition"></a>Addition</h3><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gs0okgaz6zj31k008cmyc.jpg" alt="Number%20Representation%205ca9be94e956409fb9bc1e5274f7b048/Untitled%2015.png"></p>
<p><strong>Subtractions by 2â€™s Complement</strong></p>
<p>The algorithm to subtract two binary number using 2â€™s complement is explained as following below âˆ’</p>
<ul>
<li>Take 2â€™s complement of the subtrahend</li>
<li>Add with minuend</li>
<li>If the result of above addition has <strong>carry bit 1</strong>, then <strong>it is dropped and this result will be positive number.</strong></li>
<li>If there is no carry bit 1, then take 2â€™s complement of the result which will be negative</li>
</ul>
<hr>
<h2 id="Biased-Encoding"><a href="#Biased-Encoding" class="headerlink" title="Biased Encoding"></a>Biased Encoding</h2><ul>
<li><strong>For example:</strong> 8 bit, range is $[-127, 128]$</li>
<li>Bias generally should be $2^{n-1} - 1$ to make number</li>
</ul>
<hr>
<h2 id="æ•°æ®ç±»å‹çš„å¤§å°"><a href="#æ•°æ®ç±»å‹çš„å¤§å°" class="headerlink" title="æ•°æ®ç±»å‹çš„å¤§å°"></a>æ•°æ®ç±»å‹çš„å¤§å°</h2><p><strong>æ•°æ®ç±»å‹æ‰€å å­—èŠ‚æ•°</strong></p>
<p><strong>32ä½å’Œ64ä½ä¸‹</strong></p>
<ul>
<li><strong>ç›¸åŒçš„ï¼š</strong><ul>
<li>char â€”1,   short int â€” 2,   int â€” 4,  unsingned int  â€” 4,   float â€” 4, double â€” 8 , long long 8,</li>
</ul>
</li>
<li><strong>ä¸åŒçš„ï¼š</strong><ul>
<li><strong>32ä½ä¸‹ï¼š</strong>   char* â€” 4 , long â€” 4  , unsigned long â€” 4</li>
<li><strong>64ä½ä¸‹ï¼š</strong>   <code>char*</code> â€” 8 , long â€” 8  , unsigned long â€” 8</li>
</ul>
</li>
</ul>
<h3 id="sizeof-å’Œ-strlen-çš„åŒºåˆ«"><a href="#sizeof-å’Œ-strlen-çš„åŒºåˆ«" class="headerlink" title="sizeof å’Œ strlen çš„åŒºåˆ«"></a>sizeof å’Œ strlen çš„åŒºåˆ«</h3><p><code>sizeof</code>æ˜¯<strong>è¿ç®—ç¬¦</strong>ï¼Œå®ƒè®¡ç®—çš„æ˜¯ç³»ç»Ÿåˆ†é…çš„<strong>ç©ºé—´å¤§å°</strong>ï¼Œä¸æ˜¯å­˜å‚¨æ•°æ®çš„å¤§å°</p>
<p><code>strlen</code>æ˜¯<strong>å‡½æ•°</strong>ï¼Œ()é‡Œé¢å¿…é¡»æ˜¯<strong>å­—ç¬¦ä¸²æŒ‡é’ˆæˆ–è€…å­—ç¬¦ä¸²å¸¸é‡</strong>ï¼Œè¿”å›çš„æ˜¯<code>**/0</code>å‰é¢çš„å­—ç¬¦ä¸ªæ•°ã€‚**</p>
<p><strong>ä¾‹å­</strong>ï¼š</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">char</span> dd[<span class="number">10</span>] = <span class="string">&quot;01234&quot;</span>;</span><br><span class="line">NSLog(@<span class="string">&quot;%ld,%ld&quot;</span>, <span class="keyword">sizeof</span>(dd),<span class="built_in">strlen</span>(dd));</span><br><span class="line"><span class="comment">// è¾“å‡ºï¼š10,5</span></span><br></pre></td></tr></table></figure>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">char</span>* a = <span class="string">&quot;foobar&quot;</span>; <span class="comment">// strlen(a) = 6</span></span><br><span class="line"><span class="keyword">char</span> a = <span class="string">&#x27;f&#x27;</span>; <span class="comment">// segmentation fault -- n/a</span></span><br><span class="line"><span class="keyword">char</span> a[] = &#123;<span class="string">&#x27;f&#x27;</span>, <span class="string">&#x27;o&#x27;</span>, <span class="string">&#x27;o&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;r&#x27;</span>, <span class="string">&#x27;\0&#x27;</span>&#125;; <span class="comment">// 6</span></span><br><span class="line"><span class="keyword">char</span> a[] = &#123;<span class="string">&#x27;f&#x27;</span>, <span class="string">&#x27;o&#x27;</span>, <span class="string">&#x27;o&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;r&#x27;</span>&#125;; <span class="comment">// n/a</span></span><br><span class="line"><span class="keyword">char</span>* a = <span class="string">&quot;foo\0bar&quot;</span>;</span><br></pre></td></tr></table></figure>
<h3 id="strlenç”¨æ³•"><a href="#strlenç”¨æ³•" class="headerlink" title="strlenç”¨æ³•"></a>strlenç”¨æ³•</h3><ul>
<li><code>char *a = &quot;shd&quot;</code></li>
<li><code>len = strlen(a)</code></li>
<li><code>len = 0; while (*a++) &#123; len++; &#125;</code> or <code>len = 0; while (*a++) &#123; ++len; &#125;</code></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en, cn">
    <link itemprop="mainEntityOfPage" href="http://shuoo-24.github.io/2021/06/30/%E7%9F%A5%E8%AF%86%E8%BF%9B%E6%AD%A5%E7%9A%84%E7%8A%80%E5%88%A9%E5%B7%A5%E5%85%B7%EF%BC%9A%E7%90%86%E8%AE%BA%E7%9A%84%E6%94%B6%E7%9B%8A%E5%92%8C%E6%88%90%E6%9C%AC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://ibb.co/d6rcNrG">
      <meta itemprop="name" content="Shuo">
      <meta itemprop="description" content="ä¸–ç•ŒçŒ®æˆ‘ä»¥æ­Œ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shuoçš„ç©ºé—´ç«™">
    </span>

    
    
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/06/30/%E7%9F%A5%E8%AF%86%E8%BF%9B%E6%AD%A5%E7%9A%84%E7%8A%80%E5%88%A9%E5%B7%A5%E5%85%B7%EF%BC%9A%E7%90%86%E8%AE%BA%E7%9A%84%E6%94%B6%E7%9B%8A%E5%92%8C%E6%88%90%E6%9C%AC/" class="post-title-link" itemprop="url">çŸ¥è¯†è¿›æ­¥çš„çŠ€åˆ©å·¥å…·ï¼šç†è®ºçš„æ”¶ç›Šå’Œæˆæœ¬</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2021-06-30 05:28:13 / Modified: 19:49:08" itemprop="dateCreated datePublished" datetime="2021-06-30T05:28:13-07:00">2021-06-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%80%9D%E8%80%83/" itemprop="url" rel="index"><span itemprop="name">æ€è€ƒ</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote>
<p>èŠ‚çº¦ç®—åŠ›ï¼</p>
</blockquote>
<hr>
<p>å¾ˆå¤šäººä»¥ä¸ºï¼Œç†è®ºæ˜¯æ±‚å¯¹ã€‚ä½†å…¶å®ï¼Œç†è®ºæ˜¯å–èˆçš„ç»“æœã€‚</p>
<p>å­¦ç»æµå­¦ï¼Œè¦æœ‰æˆæœ¬æ¦‚å¿µã€‚ä¸ä»…æ—¥å¸¸ç”Ÿæ´»ä¸­è¦è®²æˆæœ¬ã€æ”¶ç›Šï¼Œç†è®ºè‡ªèº«ï¼Œä¹Ÿè¦è®²æ”¶ç›Šå’Œæˆæœ¬ã€‚</p>
<p>è¿™ä¸€ç‚¹ï¼Œéå¸¸éå¸¸é‡è¦ï¼</p>
<p>ç†è§£äº†è¿™ä¸€ç‚¹ï¼Œä½ çš„ç†è®ºæ€è€ƒæ°´å¹³ä¼šæé«˜ä¸€å¤§æˆªã€‚</p>
<p>æˆ‘å’Œå¥¥æ´¾ç»å¤§éƒ¨åˆ†å…·ä½“è§‚ç‚¹ä¸€è‡´ï¼Œä½†åœ¨æ–¹æ³•è®ºä¸Šï¼Œæœ‰ä¸€ä¸ªå·¨å¤§çš„åˆ†æ­§ï¼šâ€œäººçš„è¡Œä¸ºæ˜¯æœ‰ç›®çš„çš„ï¼Œç›®çš„æ˜¯æ›´èˆ’é€‚â€æ˜¯äº‹å®è¿˜æ˜¯å‡è®¾ï¼Ÿ</p>
<p>æˆ–è€…ï¼Œç»æµå­¦æ˜¯å…ˆéªŒçš„ï¼Œè¿˜æ˜¯ç§‘å­¦çš„ï¼Ÿ</p>
<p>è¿™ä¸ªé—®é¢˜ï¼Œå¦‚æœåªæ˜¯çº ç»“äºè°å¯¹è°é”™ï¼Œå¯ä»¥äº‰ä¸Šå‡ ç™¾å¹´ã€‚</p>
<p>ä½†å¦‚æœä»æˆæœ¬ã€æ”¶ç›Šçš„è§’åº¦æ¥çœ‹ï¼Œå¾ˆå¥½è§£å†³ã€‚</p>
<p>â€œäººçš„è¡Œä¸ºæ˜¯æœ‰ç›®çš„çš„ï¼Œç›®çš„æ˜¯æ›´èˆ’é€‚â€è¿™ä¸ªæ¨ç†çš„èµ·ç‚¹ï¼Œä¸ç®¡ä½ è¯´å®ƒæ˜¯äº‹å®ï¼Œè¿˜æ˜¯å‡è®¾ï¼Œå¯¹åé¢çš„æ¨å¯¼æ²¡æœ‰å½±å“ã€‚</p>
<p>ä½ è¯´å®ƒæ˜¯äº‹å®ï¼Œä¹Ÿæ˜¯æ¨å¯¼å‡ºé‚£äº›ç»“è®ºï¼šä»·æ ¼ç†è®ºã€å¸‚åœºç»æµå¥½äºè®¡åˆ’ç»æµï¼Œç­‰ç­‰ï¼›ä½ è¯´å®ƒæ˜¯å‡è®¾ï¼Œä¹Ÿæ˜¯æ¨å¯¼å‡ºé‚£äº›ç»“è®ºã€‚</p>
<p>æˆ‘ç”¨â€œäººåœ¨å±€é™æ¡ä»¶ä¸‹è¿½æ±‚åˆ©ç›Šæœ€å¤§åŒ–â€çš„å‡è®¾ï¼Œä¹Ÿæ˜¯æ¨å¯¼å‡ºå’Œå¥¥æ´¾ä¸€æ ·çš„ç»“è®ºã€‚</p>
<p>æ‰€ä»¥ï¼Œä½ éè¯´å®ƒæ˜¯äº‹å®ï¼Œå…¶å®ç†è®ºä¸Šæ²¡æœ‰ä»€ä¹ˆé¢å¤–æ”¶ç›Šã€‚</p>
<p>ä½ è¯´ç»æµå­¦æ˜¯å…ˆéªŒç§‘å­¦ï¼Œæˆ‘è¯´ç»æµå­¦æ˜¯ç»éªŒç§‘å­¦ï¼Œæˆ‘ä»¬çš„å…·ä½“æ¨å¯¼ç»“è®ºè¿˜æ˜¯ä¸€æ ·çš„ï¼Œé‚£ä¹ˆï¼ŒåšæŒç»æµå­¦æ˜¯å…ˆéªŒç§‘å­¦ï¼Œå¹¶æ²¡æœ‰é¢å¤–æ”¶ç›Šã€‚</p>
<p>ä½†ï¼Œä¸ºäº†åšæŒä½ çš„æ¨ç†èµ·ç‚¹æ˜¯äº‹å®ã€åšæŒç»æµå­¦æ˜¯å…ˆéªŒç§‘å­¦ï¼Œä½ éœ€è¦æ”¾å¼ƒå¯è¯ä¼ªæ€§ã€å¼€æ”¾æ€§ã€ç®€æ´æ€§ï¼Œè¿™ä¸ªæˆæœ¬å¤ªé«˜äº†ã€‚</p>
<p>æ‰€ä»¥ï¼Œéè¦åšæŒç»æµå­¦æ˜¯å…ˆéªŒç§‘å­¦ï¼Œåœ¨ç†è®ºä¸Šï¼Œä»˜å‡ºäº†å·¨å¤§çš„æˆæœ¬ï¼Œä½†åŸºæœ¬æ²¡æœ‰æ”¶ç›Šï¼Œæ˜¯ä¸ªéå¸¸ä¸åˆç®—çš„ä¹°å–ã€‚</p>
<p>ä¸¾ä¸€ä¸ªç†è®ºçš„æˆæœ¬æ”¶ç›Šçš„ä¾‹å­ã€‚</p>
<p>è‡ªç„¶æƒåˆ©ç†è®ºï¼Œåœ¨ç»å¤§éƒ¨åˆ†æ–¹é¢çš„è§£é‡ŠåŠ›ï¼Œéƒ½ç¢¾å‹äººèµ‹æƒåˆ©ç†è®ºï¼Œä½†åœ¨å°‘æ•°æ–¹é¢ï¼Œä¸å¦‚äººèµ‹æƒåˆ©ç†è®ºã€‚</p>
<p>ä¾‹å¦‚ï¼Œåœ¨èµ”å¿é—®é¢˜ä¸Šï¼Œå°±ä¸å¦‚äººèµ‹æƒåˆ©ç†è®ºã€‚</p>
<p>ä½ æ— æ„ä¸­æŸååˆ«äººä¸€ä¸ªç‰©ä»¶ï¼Œè¯¥æ€ä¹ˆèµ”å¿ï¼Ÿè¿™ä¸ªä¸œè¥¿å¸‚ä»·20å—ï¼Œä½†ä¹Ÿè®¸å¯¹é‚£ä¸ªäººæ¥è¯´ï¼Œä»–çš„ä¸»è§‚ä»·å€¼æ˜¯100ä¸‡å‘¢ï¼Ÿå› ä¸ºä»–ç”¨çš„å¹´å¤´ä¹…ï¼Œæœ‰å¾ˆæ·±çš„æ„Ÿæƒ…ã€‚ä¸»è§‚ä»·å€¼åœ¨ä»–å¿ƒé‡Œï¼Œä»–å¯ä»¥éšä¾¿å‡ºä»·ã€‚è¯¥æ€ä¹ˆèµ”ï¼Ÿ</p>
<p>è€Œäººèµ‹æƒåˆ©ç†è®ºå¯ä»¥è½»æ¾è§£å†³è¿™ä¸ªã€‚å¤§å®¶æ€ä¹ˆå®šå°±æ€ä¹ˆèµ”å•°ã€‚</p>
<p>ä½†ï¼Œä½ åº”è¯¥å› æ­¤è€Œé€‰æ‹©äººèµ‹æƒåˆ©ç†è®ºå—ï¼Ÿ</p>
<p>æˆ‘å½“ç„¶æ˜¯é€‰æ‹©è‡ªç„¶æƒåˆ©ç†è®ºã€‚</p>
<p>å› ä¸ºï¼Œå°½ç®¡è‡ªç„¶æƒåˆ©ç†è®ºåœ¨è¿™æ–¹é¢æœ‰å¼±ç‚¹ï¼Œä½†åœ¨å…¶ä»–æ–¹é¢å¨åŠ›å·¨å¤§ï¼Œæ¯”è¾ƒä¸¤è€…çš„æ”¶ç›Šï¼Œæˆ‘è§‰å¾—é€‰æ‹©è‡ªç„¶æƒåˆ©ç†è®ºæ”¶ç›Šæ›´å¤§ã€‚</p>
<p>é‚£ä¹ˆï¼Œæ˜¯å¦åº”è¯¥ä¸€ä¼šå„¿è®²è‡ªç„¶æƒåˆ©ï¼Œä¸€ä¼šå„¿è®²äººèµ‹æƒåˆ©å‘¢ï¼Ÿæ¯”å¦‚ï¼Œåœ¨èµ”å¿é—®é¢˜ä¸Šï¼Œæ˜¯å¦åº”è¯¥æ¢æˆäººèµ‹æƒåˆ©å‘¢ï¼Ÿ</p>
<p>å½“ç„¶ä¸åº”è¯¥ã€‚</p>
<p>å¦‚æœè¿™æ ·åšï¼Œä½ å€’æ˜¯æ„Ÿè§‰åˆ°é—®é¢˜è§£å†³äº†ï¼Œä½†é‚£æ˜¯å‡çš„è§£å†³ï¼Œå› ä¸ºä½ æ”¾å¼ƒäº†ç†è®ºçš„é€»è¾‘ä¸€è‡´æ€§ï¼Œè¿™ä¸ªæˆæœ¬è¿œå¤§äºæ”¶ç›Šã€‚</p>
<p>æˆ‘çš„åšæ³•æ˜¯ï¼ŒæŠŠè‡ªç„¶æƒåˆ©çš„èµ”å¿ç†è®ºäº¤ç»™æœªæ¥çš„äººç±»è®¤çŸ¥è¿›æ­¥å»è§£å†³ã€‚</p>
<p>è¿™ä¸ªä¾‹å­ï¼Œä¸çŸ¥æ˜¯å¦è®©ä½ æ˜ç™½äº†ï¼Œç†è®ºå…¶å®æ˜¯å–èˆçš„ç»“æœï¼Ÿ</p>
<p>ä»¥å‰æœ‰å¥¥æ´¾æœ‹å‹ï¼Œæ¯”å¦‚å¼ æ˜¯ä¹‹ï¼Œé—®æˆ‘ï¼šä½ è¯´ç»æµå­¦æ˜¯ç»éªŒç§‘å­¦ï¼Œé‚£åˆ«äººæ‹¿ç»éªŒäº‹å®æ¥æ¨ç¿»ä½ ï¼Œä½ æ€ä¹ˆä¸ºç»æµå­¦è¾©æŠ¤ï¼Ÿ</p>
<p>è¿™ä¸ªå…¶å®å¾ˆç®€å•ã€‚æˆ‘è¯´æœ€ä½å·¥èµ„æ³•å¢åŠ å¤±ä¸šï¼Œä½ è¯´æœ‰æ•°æ®è¯æ˜æœ€ä½å·¥èµ„æ³•æœ‰åˆ©äºå°±ä¸šï¼Œæ¨ç¿»äº†æˆ‘çš„è§‚ç‚¹ï¼Œé‚£æˆ‘è‚¯å®šå¾—è·Ÿä½ çœ‹å±€é™æ¡ä»¶å•Šã€‚å°±ä¸šå¢åŠ ï¼Œå¾ˆå¯èƒ½æ˜¯å…¶ä»–å±€é™æ¡ä»¶å˜åŒ–çš„ç»“æœã€‚</p>
<p>è€Œæœ€å…³é”®çš„æ˜¯ï¼Œè¿™å±äºè¯´æœåˆ«äººçš„æˆæœ¬ï¼Œæ˜¯å¦ä¸€å›äº‹ï¼Œä¸æ˜¯ç†è®ºæœ¬èº«çš„æˆæœ¬ã€‚</p>
<p>ç†è®ºæœ¬èº«çš„æˆæœ¬ã€æ”¶ç›Šï¼Œåªè¦çœ‹ç†è®ºçš„é€»è¾‘ä¸€è‡´æ€§ã€ç®€æ´æ€§ã€å¯è¯ä¼ªæ€§æ€§ç­‰è‡ªèº«ç‰¹å¾ã€‚ç®€å•åœ°è¯´ï¼Œè¦çœ‹ç†è®ºæ€æ ·å–èˆæ›´èŠ‚çº¦ç®—åŠ›ã€‚</p>
<p>è¯´æœä»–äººçš„æˆæœ¬ï¼Œå’Œç†è®ºè‡ªèº«çš„ç®—åŠ›æ— å…³ã€‚</p>
<p>ä½•å†µï¼Œä½ åšæŒç»æµå­¦æ˜¯å…ˆéªŒçš„ï¼Œæ›´éš¾è¯´æœä»–äººã€‚å¤§éƒ¨åˆ†äººä¸€å¬ä½ è¯´ç»æµå­¦æ˜¯å…ˆéªŒçš„ï¼Œéƒ½æ˜¯ç»™ä½ ä¸€ä¸ªç™½çœ¼å°±èµ°å¼€äº†ã€‚</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en, cn">
    <link itemprop="mainEntityOfPage" href="http://shuoo-24.github.io/2021/06/30/RISC-V%20Instruction%20Overview/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://ibb.co/d6rcNrG">
      <meta itemprop="name" content="Shuo">
      <meta itemprop="description" content="ä¸–ç•ŒçŒ®æˆ‘ä»¥æ­Œ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shuoçš„ç©ºé—´ç«™">
    </span>

    
    
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/06/30/RISC-V%20Instruction%20Overview/" class="post-title-link" itemprop="url">RISC-V Instruction Overview</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-06-30 03:23:04" itemprop="dateCreated datePublished" datetime="2021-06-30T03:23:04-07:00">2021-06-30</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2021-07-17 13:45:39" itemprop="dateModified" datetime="2021-07-17T13:45:39-07:00">2021-07-17</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/UCB-61C/" itemprop="url" rel="index"><span itemprop="name">UCB-61C</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote>
<p><em>References:</em></p>
<ol>
<li><em>ã€å‚è€ƒ 1ã€‘: The RISC-V Instruction Set Manual, Volume I: Unprivileged ISA, Document Version 20191213</em></li>
<li><em>ã€å‚è€ƒ 2ã€‘: Using as: <a target="_blank" rel="noopener" href="https://sourceware.org/binutils/docs/as/">https://sourceware.org/binutils/docs/as/</a></em></li>
<li><em>ã€å‚è€ƒ 3ã€‘: How to Use Inline Assembly Language in C Code: <a target="_blank" rel="noopener" href="https://gcc.gnu.org/onlinedocs/gcc/Using-">https://gcc.gnu.org/onlinedocs/gcc/Using-</a> Assembly-Language-with-C.html</em></li>
</ol>
</blockquote>
<p><em><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gs5he6eo1mj30xc0i8tku.jpg" alt="image-20210704113134394"></em></p>
<h2 id="è¯­æ³•ä»‹ç»"><a href="#è¯­æ³•ä»‹ç»" class="headerlink" title="è¯­æ³•ä»‹ç»"></a>è¯­æ³•ä»‹ç»</h2><ul>
<li><p>An instruction consists of </p>
<ul>
<li><u>==opcode==</u>: unique code to specify the desired operation</li>
<li>==<u>operands</u>==: zero or more additionalinformation needed for the operation</li>
</ul>
</li>
<li><p>The operation designates the type and size of the operands</p>
<ul>
<li><p>Typical type and size: </p>
<ul>
<li>Character (8 bits), </li>
<li>half-word (eg:16bits), </li>
<li>word (eg:32bits) </li>
<li>single-precision floating point (eg:1word), </li>
<li>double-precision floating point (eg:2 words).</li>
</ul>
</li>
<li><p>Expectations from any new 32-bit architecture:</p>
<p>Support for8-, 16-and 32-bit integer and 32-bitand 64-bit floating point operations. A 64-bit architecture would need to support 64-bit integers as well.</p>
</li>
</ul>
</li>
<li><p>ä¸€ä¸ªå®Œæ•´çš„ RISC-V æ±‡ç¼–ç¨‹åºæœ‰å¤šæ¡ è¯­å¥ (statement) ç»„æˆã€‚</p>
</li>
<li><p>ä¸€æ¡å…¸å‹çš„ RISC-V æ±‡ç¼– è¯­å¥ ç”± 3 éƒ¨åˆ†ç»„æˆ:</p>
<p><code>[label:] [operation][comment]</code></p>
<ul>
<li><p><code>label</code> GNUæ±‡ç¼–ä¸­ï¼Œä»»ä½•ä»¥å†’å·ç»“å°¾çš„æ ‡è¯†ç¬¦éƒ½è¢« è®¤ä¸ºæ˜¯ä¸€ä¸ªæ ‡å·ã€‚</p>
</li>
<li><p><code>operation</code> å¯ä»¥æœ‰ä»¥ä¸‹å¤šç§ç±»å‹:</p>
<ul>
<li>==instruction==(æŒ‡ä»¤): ç›´æ¥å¯¹åº”äºŒè¿›åˆ¶æœºå™¨æŒ‡ä»¤çš„å­—ç¬¦ä¸²</li>
<li>==pseudo-instruction==(ä¼ªæŒ‡ä»¤): ä¸ºäº†æé«˜ç¼–å†™ä»£ç çš„æ•ˆç‡ï¼Œå¯ä»¥ç”¨ä¸€æ¡ä¼ªæŒ‡ä»¤æŒ‡ç¤ºæ±‡ç¼–å™¨äº§ç”Ÿå¤šæ¡å®é™…çš„æŒ‡ä»¤(instructions)ã€‚</li>
<li>==directive==(æŒ‡ç¤º/ä¼ªæ“ä½œ): é€šè¿‡ç±»ä¼¼æŒ‡ä»¤çš„å½¢å¼(ä»¥â€œ.â€å¼€å¤´)ï¼Œé€šçŸ¥æ±‡ç¼–å™¨å¦‚ä½•æ§åˆ¶ä»£ç çš„äº§ç”Ÿç­‰ï¼Œä¸å¯¹åº”å…·ä½“çš„æŒ‡ä»¤ã€‚ </li>
<li>==macro==: é‡‡ç”¨ .macro/.endm è‡ªå®šä¹‰çš„å®</li>
</ul>
</li>
<li><p><code>comment</code>(æ³¨é‡Š): æ³¨é‡Šæ–¹å¼ï¼Œâ€œ#â€ å¼€å§‹åˆ°å½“å‰è¡Œç»“æŸã€‚</p>
</li>
</ul>
</li>
</ul>
<h2 id="æ±‡ç¼–æŒ‡ä»¤æ“ä½œå¯¹è±¡"><a href="#æ±‡ç¼–æŒ‡ä»¤æ“ä½œå¯¹è±¡" class="headerlink" title="æ±‡ç¼–æŒ‡ä»¤æ“ä½œå¯¹è±¡"></a>æ±‡ç¼–æŒ‡ä»¤æ“ä½œå¯¹è±¡</h2><h3 id="å¯„å­˜å™¨"><a href="#å¯„å­˜å™¨" class="headerlink" title="å¯„å­˜å™¨"></a>å¯„å­˜å™¨</h3><ul>
<li><p><em>32ä¸ªé€šç”¨å¯„å­˜å™¨ï¼Œx0 ~ x31(æ³¨æ„: ä»…æ¶‰åŠ RV32I çš„é€šç”¨å¯„å­˜å™¨ç»„);</em></p>
</li>
<li><p><em>åœ¨ RISC-V ä¸­ï¼ŒHart åœ¨æ‰§è¡Œç®—æœ¯é€»è¾‘è¿ç®—æ—¶æ‰€æ“ä½œçš„ æ•°æ®å¿…é¡»ç›´æ¥æ¥è‡ªå¯„å­˜å™¨ã€‚</em></p>
</li>
</ul>
<h3 id="å†…å­˜"><a href="#å†…å­˜" class="headerlink" title="å†…å­˜"></a><em>å†…å­˜</em></h3><ul>
<li><em>Hart å¯ä»¥æ‰§è¡Œåœ¨å¯„å­˜å™¨å’Œå†…å­˜ä¹‹é—´çš„æ•°æ®è¯»å†™æ“ä½œ;</em></li>
<li><em>è¯»å†™æ“ä½œä½¿ç”¨å­—èŠ‚(Byte)ä¸ºåŸºæœ¬å•ä½è¿›è¡Œå¯»å€; â€¢ RV32 å¯ä»¥è®¿é—®æœ€å¤š $2^32$ ä¸ªå­—èŠ‚çš„å†…å­˜ç©ºé—´ã€‚</em></li>
</ul>
<hr>
<h2 id="æŒ‡ä»¤ç¼–ç æ ¼å¼"><a href="#æŒ‡ä»¤ç¼–ç æ ¼å¼" class="headerlink" title="æŒ‡ä»¤ç¼–ç æ ¼å¼"></a>æŒ‡ä»¤ç¼–ç æ ¼å¼</h2><p><em><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gs5fcais71j30wq0h4gys.jpg" alt="image-20210704102033367"></em></p>
<ul>
<li><p><em>`</em>func7`æŒ‡æœ‰7ä¸ªbytes**</p>
<ul>
<li><code>func3</code> å’Œ <code>func7</code> æ€»æ˜¯ $000$ å’Œ $0000000$</li>
</ul>
</li>
<li><p>One <u>word</u> is 32 bits, so divide instruction word into â€œ==fields==â€</p>
<ul>
<li>Each field tells processor something about instruction</li>
</ul>
</li>
<li><p>We could define different fields for each instruction, but RISC-V seeks simplicity, so define six basic types of instruction formats:</p>
<ol>
<li><p><em>==R-format for register-register arithmetic operations==</em></p>
</li>
<li><p><em>==I-format for register-immediate arithmetic operations and loads==</em></p>
</li>
<li><p><em>==S-format for stores==</em></p>
</li>
<li><p><em>==B-format for branches (minor variant of S-format)==</em></p>
</li>
<li><p><em>==U-format for 20-bit upper immediate instructions==</em></p>
</li>
<li><p><em>==J-format for jumps (minor variant of U-format)==</em></p>
</li>
</ol>
</li>
</ul>
<h3 id="1-R-type-Register"><a href="#1-R-type-Register" class="headerlink" title="1. R-type:(Register)"></a>1. R-type:(Register)</h3><ul>
<li>æ¯æ¡æŒ‡ä»¤ä¸­æœ‰<strong>ä¸‰ä¸ª fields</strong>ï¼Œç”¨äºæŒ‡å®š <strong>3 ä¸ªå¯„å­˜å™¨</strong>å‚æ•° â€” æ•°é‡å°‘ï¼Œæ“ä½œå¿«</li>
<li><p><code>opcode</code>: partially specifies what instruction it is</p>
<ul>
<li>This field is equal to $0110011_{\text{two}}$ for all R-format register-register arithmetic instructioins</li>
</ul>
</li>
<li><p><strong>fields</strong>:</p>
<ul>
<li><code>rs1</code>: source register field #1</li>
<li><code>rs2</code>: source register field #2</li>
<li><code>rd</code>: <u>destination register</u> which will receive <strong>result</strong> of the computation</li>
<li><strong>Each register holds a 5-bit unsigned integer(0-31) to corresponding to a register number (x0-x31)</strong></li>
</ul>
</li>
<li><p>Six fields: </p>
<p>7(<code>func7</code>) + 5(<code>rs2</code>) + 5(<code>rs1</code>) + 3(<code>func3</code>) + 5(<code>rd</code>) + 7(<code>opcode</code>) = 32</p>
<ul>
<li>Why <code>rs1</code>, <code>rs2</code>, and <code>rd</code> have 5 bits?<ul>
<li>To store exactly 32 values from 0 to 21 ($2^5=32$).</li>
</ul>
</li>
</ul>
</li>
<li><p><em><img src="https://tva1.sinaimg.cn/large/008i3skNly1gs5fnyma1ij310o0kajx2.jpg" alt="image-20210704103146634" style="zoom:47%;" /></em></p>
</li>
<li><p>We can <strong>change value of <code>func3</code> and <code>func7</code></strong> to perform different instructions, and in total we can perform $(2^3\cdot2^7)=2^{10}=1024$ R-format instructions.</p>
<ul>
<li><code>func3</code> and <code>func7</code>describe what operation to perform</li>
</ul>
</li>
</ul>
<h5 id="All-Instructions"><a href="#All-Instructions" class="headerlink" title="All Instructions"></a>All Instructions</h5><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gs7qudka3vj30jy0huq6b.jpg" alt="image-20210706102937190"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gs7qulweclj30ji068jsm.jpg" alt="image-20210706102953167"></p>
<h3 id="2-I-type-Immediate"><a href="#2-I-type-Immediate" class="headerlink" title="2. I-type: (Immediate)"></a>2. I-type: (Immediate)</h3><ul>
<li><em>æ¯æ¡æŒ‡ä»¤é™¤äº†å¸¦æœ‰<strong>ä¸¤ä¸ªå¯„å­˜å™¨</strong>å‚æ•°å¤–ï¼Œè¿˜å¸¦æœ‰ä¸€ä¸ª<strong>ç«‹å³æ•°</strong>å‚æ•°ï¼ˆç”¨æ¥è¡¨ç¤ºæ•´æ•°ï¼‰</em></li>
<li>Compare: <strong>add rd,rs1,rs2</strong> with <strong>addi rd, rs1, imm</strong><ul>
<li>5-bit field only represents numbers up to the value 31:</li>
<li>immediates may be much larger than this</li>
</ul>
</li>
<li>Ideally, RISC-V would have only one instruction format (for simplicity): unfortunately, we need to compromise</li>
<li>Define new instruction format that is mostly consistent with R-format</li>
<li>Notice if instruction has immediate, then uses <strong>at most 2 registers</strong> (one source, one destination)<img src="https://tva1.sinaimg.cn/large/008i3skNgy1gs5gduzha0j31220l6djh.jpg" alt="image-20210704105640491" style="zoom: 33%;" /></li>
<li><code>immediate</code>: <ul>
<li><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gs5gej2nfej310e0hajut.jpg" alt="image-20210704105718907" style="zoom: 33%;" />*</li>
</ul>
</li>
<li>When the I-type format is used for load instructions, the <strong>immediate represents a byte offset</strong>, so the load doubleword instruction can refer to any doubleword within a region of $Â±\;2^{11}$ or 2048 bytes ($Â±\;2^8$ or 256 doublewords) of the base address in the base register <code>rd</code></li>
</ul>
<h5 id="All-instructions"><a href="#All-instructions" class="headerlink" title="All instructions"></a>All instructions</h5><p><em><img src="https://tva1.sinaimg.cn/large/008i3skNly1gs5gg1g2o8j60zi0fsqdf02.jpg" alt="image-20210704105845398"></em></p>
<ul>
<li><em><code>srai</code>:  <u>shift right arithmetic (srai</u>). This variant is similar to srli, except rather than filling the vacated bits on the left with zeros, it <em>*fills them with copies of the old sign bit.</em></em> </li>
</ul>
<h5 id="Load-Instructions-are-also-I-type"><a href="#Load-Instructions-are-also-I-type" class="headerlink" title="Load Instructions are also I-type"></a>Load Instructions are also I-type</h5><p><em><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gs5gr6txumj31040joqcz.jpg" alt="image-20210704110929274"></em></p>
<ul>
<li><code>opcode</code>: <strong>0000011</strong></li>
</ul>
<p><em><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gs5h1c25qbj30xa06mjs7.jpg" alt="image-20210704111914066" style="zoom:50%;" /></em></p>
<ul>
<li>The 12-bit signed immediate is added to the base address in register <code>rsl</code> to form the memory address<ul>
<li>This is very similar to the add-immediate operation but used to create address, not to create final result</li>
</ul>
</li>
<li>Value loaded from memory is stored in <code>rd</code></li>
</ul>
<h3 id="3-S-type-Store"><a href="#3-S-type-Store" class="headerlink" title="3. S-type: (Store)"></a>3. S-type: (Store)</h3><ul>
<li>æ¯æ¡æŒ‡ä»¤é™¤äº†å¸¦æœ‰<strong>ä¸¤ä¸ªå¯„å­˜å™¨</strong>å‚æ•°å¤–ï¼ˆæ— <code>sd</code>ï¼‰ï¼Œè¿˜å¸¦æœ‰ä¸€ä¸ª<strong>ç«‹å³æ•°</strong>å‚æ•°(å®½åº¦ä¸º 12 bitsï¼Œä½† fields çš„ç»„ç»‡æ–¹å¼ä¸åŒäº I-typeï¼Œåˆ†ä¸ºä¸¤ä¸ªfieldæ¥å­˜å‚¨ä¸€ä¸ªimmediate)</li>
<li><p><em><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gs5h34mr9lj30wq03emxl.jpg" alt="image-20210704112057665"></em></p>
</li>
<li><p>Store needs to read two registers</p>
<ul>
<li><code>rs1</code> for base memory address</li>
<li><code>rs2</code> for data to be stored</li>
<li><code>immediate</code> <code>offset</code></li>
</ul>
</li>
<li>Canâ€™t have both <code>rs2</code> and <code>immediate</code> in same place as other instructions! </li>
<li><strong>Note</strong>: stores donâ€™t write a value to the register file, no <code>rd</code>!</li>
<li>RISC-V design decision is move low 5 bits of <code>immediate</code> to where <code>rd</code> field was in other instructions â€“ keep <code>rs1</code>/<code>rs2</code> fields in same place </li>
<li>register names more critical than immediate bits in hardware design</li>
<li><strong>Example</strong>: <img src="https://tva1.sinaimg.cn/large/008i3skNgy1gs5h5fkiuwj30wg09iwh4.jpg" alt="image-20210704112310134" style="zoom:33%;" /></li>
</ul>
<h5 id="All-instructions-1"><a href="#All-instructions-1" class="headerlink" title="All instructions"></a>All instructions</h5><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gs7jf9er3uj31000gkgrh.jpg" alt="image-20210706061256759"></p>
<h3 id="4-B-type-Branch"><a href="#4-B-type-Branch" class="headerlink" title="4. B-type: (Branch)"></a>4. B-type: (Branch)</h3><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gs7j9rfyv1j30zk07qdgz.jpg" alt="image-20210706060738252"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gs7k2cigqrj319e06i0ya.jpg" alt="image-20210706063508120"></p>
<ul>
<li><p>æ¯æ¡æŒ‡ä»¤é™¤äº†å¸¦æœ‰<strong>ä¸¤ä¸ªå¯„å­˜å™¨</strong>å‚æ•°å¤–ï¼ˆæ— <code>sd</code>ï¼‰ï¼Œè¿˜å¸¦æœ‰ä¸€ä¸ª<strong>ç«‹å³æ•°</strong>å‚æ•°(å®½åº¦ ä¸º 12 bitsï¼Œä½†å–å€¼ä¸º 2 çš„å€æ•°)ã€‚</p>
</li>
<li><p>ä¸åˆ†æ”¯è·³è½¬æœ‰å…³</p>
</li>
<li><p>B-format is mostly same as S-Format, with two register sources (<strong>rs1</strong>/<strong>rs2</strong>) and a 12-bit immediate <strong>imm[12:1]</strong></p>
<ul>
<li><p>But now <code>immediate</code> represents values -4096 to +4094 in 2-byte increments</p>
</li>
<li><p>The 12 <code>immediate</code> bits encode even 13-bit signed byte offsets (<strong>lowest</strong> <strong>bit of offset is always zero</strong>, so no need to store it)</p>
</li>
<li><code>Immediate</code> is translated as the <strong>offset</strong> of the <code>label</code> passed in from the PC, i.e. <code>labelâˆ’PC=imm</code>. It is then broken down bitwise and encoded into the bitstring in the format given. All other fields remain the same as previous instruction formats.</li>
</ul>
</li>
</ul>
<h4 id="Branching-Instruction-Usage"><a href="#Branching-Instruction-Usage" class="headerlink" title="Branching Instruction Usage"></a>Branching Instruction Usage</h4><ul>
<li>Typically used for <strong>loops</strong><ul>
<li>Loops are generally <strong>small</strong> (&lt; 50 instructions)</li>
<li><strong>Unconditional</strong> jumping and <strong>function</strong> call are <strong>J-format</strong> and handled with jump instructions</li>
</ul>
</li>
<li><strong>Recall</strong>: instructions are stored in a localized area of memory (<strong>Text/Code</strong>)<ul>
<li>Largest branching <strong>distance</strong> is <strong>limited by size of code</strong></li>
<li>Address of current instruction is stored in <u>program counter(PC)</u></li>
</ul>
</li>
</ul>
<h4 id="PC-Relative-Addressing"><a href="#PC-Relative-Addressing" class="headerlink" title="PC-Relative Addressing"></a><u>PC-Relative Addressing</u></h4><ul>
<li>Use immediateâ€™s field as a <strong>twoâ€™s-complement offset</strong> to PC<ul>
<li>Uses the <strong>PC and adds the immediate value of the instruction (multiplied by 2)</strong> to create an address (used by branch and jump instructions)</li>
</ul>
</li>
<li>Branches generally change the PC by a small amount</li>
<li>Can specify $\pm\;2^{11}$ â€˜unitâ€™ addresses from the PC<ul>
<li>5 units from the destination register we donâ€™t need</li>
<li>7 units from <code>func7</code> field</li>
<li>We will see in a bit that we can <strong>encode 12-bit offsets</strong> as <code>immediate</code></li>
<li><em>In RISC V, many instructions have a 12-bit offset, and these are all signed extended to 32- or 64-bits (for RV32 or RV64, respectively). (Some instructions have a 20-bit offset, some of which work a bit differently.)</em></li>
<li><strong>Explaination to the question</strong>: <em>What is range of 32-bit instructions that can be reached from the current PC using a branch instruction?</em><ul>
<li>The immediate field of the branch instruction is <strong>12 bits</strong>. This field only references addresses that are <strong>divisible by 2</strong>, so the immediate is <strong>multiplied by 2</strong> before being added to the PC. Thus, the branch immediate can move the reference 2-byte instructions that are within $[âˆ’2^{11} , 2^{11} âˆ’ 1]$ instructions of the current PC.</li>
<li>The instructions we use, however, are 4 bytes so they reside at addresses that are divisible by 4 not 2. Therefore, we can only reference half as many 4-byte instructions as before, and the range of 4-byte instructions is $[âˆ’2^{10} , 2^{10} âˆ’ 1]$</li>
</ul>
</li>
</ul>
</li>
<li>Why <strong>not use byte</strong>s as a unit of offset from PC?<ul>
<li>Because instructions are 32-bit (4-bytes)</li>
<li>We donâ€™t branch into middle of instruction</li>
</ul>
</li>
</ul>
<h5 id="Branch-Calculation"><a href="#Branch-Calculation" class="headerlink" title="Branch Calculation"></a>Branch Calculation</h5><ul>
<li><p>If we donâ€™t take the branch:</p>
<ul>
<li><strong>PC = PC + 4</strong> (i.e., next instruction)</li>
</ul>
</li>
<li><p>If we do take the branch: </p>
<ul>
<li><strong>PC = PC + immediate * 4</strong></li>
</ul>
</li>
<li><p>Observations:</p>
<ul>
<li><strong>immediate</strong> is number of instructions to jump (remember, specifies words) either <strong>forward</strong> (+) or <strong>backwards</strong> (â€“)</li>
</ul>
</li>
</ul>
<h5 id="Actural-RV32-Branch-Calculation"><a href="#Actural-RV32-Branch-Calculation" class="headerlink" title="Actural RV32 Branch Calculation"></a>Actural RV32 Branch Calculation</h5><ul>
<li><p>If we donâ€™t take the branch:</p>
<ul>
<li><strong>PC = PC + 4</strong> (i.e., next instruction)</li>
</ul>
</li>
<li><p>If we do take the branch: </p>
<ul>
<li><strong>PC = PC + immediate * 2</strong></li>
</ul>
</li>
</ul>
<h5 id="Determine-Offset"><a href="#Determine-Offset" class="headerlink" title="Determine Offset"></a>Determine Offset</h5><ul>
<li><p><strong>Example</strong>: <img src="https://tva1.sinaimg.cn/large/008i3skNgy1gs7jdpwn7ij30rs0a4dhg.jpg" alt="image-20210706061127996" style="zoom: 33%;" /></p>
<ul>
<li><p>==Branch <strong>offset</strong> = <strong>4</strong>Ã—<strong>32-bit instructions = 16 bytes</strong>==</p>
<p>(Branch with offset of 0, branches to itself)</p>
</li>
<li><p><strong>Encoding</strong>:<img src="https://tva1.sinaimg.cn/large/008i3skNgy1gs7jidrvq4j30yo06u764.jpg" alt="image-20210706061556361"></p>
<ul>
<li>Opocode for <code>BRANCH</code> <code>beq</code>: 1100011</li>
<li><code>rs1</code>: 19 in binary</li>
<li><code>rs2</code>: 10 in binary</li>
</ul>
</li>
<li><p><strong>Complete Encoding</strong>:</p>
<ul>
<li><code>beq x19, x10</code>, <strong>offset</strong> = <strong>16</strong> bytes</li>
<li>13-bit <strong>immediate</strong>, <code>imm[12:0]</code>, with value <strong>16</strong><ul>
<li>$0000000010000$, <code>imm[0]</code>is discarded, always zero</li>
</ul>
</li>
<li><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gs7jtma6ngj31380ay41w.jpg" alt="image-20210706062644563"></li>
</ul>
</li>
</ul>
</li>
</ul>
<h5 id="All-instructions-2"><a href="#All-instructions-2" class="headerlink" title="All instructions"></a>All instructions</h5><ul>
<li>Opcode is the same of all branches: $1100011$</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gs7jb34hw9j310i0pm10o.jpg" alt="image-20210706060855809"></p>
<h4 id="Translation"><a href="#Translation" class="headerlink" title="Translation"></a>Translation</h4><ul>
<li>Retrieve <code>imm</code> value:<ul>
<li>address of <code>bne</code> - address of label position</li>
<li>sign extend to 13 bits</li>
<li>rearrange bits in appropriate order</li>
</ul>
</li>
</ul>
<h4 id="5-U-type-Upper"><a href="#5-U-type-Upper" class="headerlink" title="5. U-type: (Upper)"></a>5. U-type: (Upper)</h4><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gs7ka4caqhj30t806g3z6.jpg" alt="image-20210706064235075"></p>
<p>æ¯æ¡æŒ‡ä»¤å«æœ‰ä¸€ä¸ªå¯„å­˜å™¨å‚æ•°å†åŠ ä¸Šä¸€ä¸ªç«‹å³æ•°å‚æ•°(å®½åº¦ä¸º 20 bitsï¼Œç”¨äºè¡¨ç¤ºä¸€ä¸ª<strong>ç«‹å³æ•°çš„é«˜ 20 ä½</strong>)</p>
<h4 id="Long-Immediate"><a href="#Long-Immediate" class="headerlink" title="Long Immediate"></a>Long Immediate</h4><ul>
<li><p>We want to load a memory address into a register so we can jump to it laterâ€”how can we do that in one instruction? </p>
<ul>
<li>We canâ€™t! </li>
<li>Because  instructions  in  our  system  are  words,  which  are  32-bits.   Ourregisters can hold that length, being 32-bits themselves. However, because our instructions them-selves are 32-bits, attempting to load something else thatâ€™s 32 bits, well, that just doesnâ€™t work out logically. </li>
<li>Thus, we need at the very least, <strong>2 instructions</strong> to do that.  All the instructions we have currently fill in the <strong>lower bits</strong> of a register; the ones (I-type) weâ€™re interested in takes care of the base 12 bits.  To handle the <strong>upper 20 bits</strong>, we now use our <strong>upper immediate instructions</strong>. </li>
</ul>
</li>
<li><p>Has <strong>20-bit immediate</strong> in upper <strong>20</strong> bits of 32-bit instruction word</p>
</li>
<li><p>One destination register, <code>rd</code></p>
</li>
<li><p>There are two such instructions: </p>
<ul>
<li><strong>lui </strong>â€“ Load Upper Immediate</li>
<li><strong>auipc</strong> â€“ Add Upper Immediate to PC</li>
</ul>
</li>
</ul>
<h4 id="LUI-to-Create-Long-Immediate"><a href="#LUI-to-Create-Long-Immediate" class="headerlink" title="LUI to Create Long Immediate"></a>LUI to Create Long Immediate</h4><ul>
<li><p>LUI writes the upper 20 bits of the destination with the immediate value, and clears the lower 12 bits.</p>
</li>
<li><p>Together with an <strong>addi</strong> to set low 12 bits, can create any 32-bit value in a register using two instructions (<strong>lui</strong>/<strong>addi</strong>).</p>
</li>
<li><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gs7kar8s5kj30s80300tr.jpg" alt="image-20210706064313290" style="zoom:67%;" /></p>
<ul>
<li>LUI puts 0x87654 into the upper 20 bits(5 nibbles) and <code>addi</code> adds 0x321 to it. </li>
</ul>
</li>
<li><p><strong>addi </strong>12-bit immediate is always <strong>sign-extended</strong>, if <strong>top bit is set</strong>, will subtract -1 from upper 20 bits: <img src="https://tva1.sinaimg.cn/large/008i3skNly1gs7kifvy3nj30qy03it96.jpg" alt="image-20210706065036469"></p>
</li>
<li><strong>Pre-increment</strong> value placed in upper 20 bits, if sign bit will be set on immediate in lower 12 bits:<img src="https://tva1.sinaimg.cn/large/008i3skNgy1gs7kiwsgy9j30rq066dgi.jpg" alt="image-20210706065102507" style="zoom:50%;" /></li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gs7kd2qphzj30r20ekgon.jpg" alt="image-20210706064526385" style="zoom:37%;" /></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gs7kdbv5y0j30r209w0tr.jpg" alt="image-20210706064541923" style="zoom:37%;" /></p>
<ul>
<li><p>Assembler pseudo-op handles all of this:</p>
<p><code>li x10, 0xDEADBEEF # Creates two instructions</code></p>
</li>
</ul>
<h4 id="AUIPC"><a href="#AUIPC" class="headerlink" title="AUIPC"></a>AUIPC</h4><ul>
<li><p>Adds upper immediate value to PC and places result in destination register</p>
</li>
<li><p>Used for PC-relative addressing</p>
</li>
<li><p><code>Label: AUIPC x10, 0 # Puts address of Label in x10</code></p>
</li>
</ul>
<h3 id="6-J-type-Jump"><a href="#6-J-type-Jump" class="headerlink" title="6. J-type: (Jump)"></a>6. J-type: (Jump)</h3><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gs7lfqfncbj30yi04wdge.jpg" alt="image-20210706072234463"></p>
<p>æ¯æ¡æŒ‡ä»¤å«æœ‰<strong>ä¸€ä¸ªå¯„å­˜å™¨</strong>å‚æ•°å†åŠ ä¸Š<strong>ä¸€ä¸ªç«‹å³æ•°</strong>å‚æ•°(å®½åº¦ä¸º 20 bits)</p>
<ul>
<li><p><strong>jal</strong> saves PC+4 in register <strong>rd</strong> (the return address)</p>
<ul>
<li>Assembler â€œ<strong>j</strong>â€ jump is pseudo-instruction, uses JAL but sets <strong>rd=x0</strong> to discard return address</li>
</ul>
</li>
<li><p>Set PC = PC + offset (PC-relative jump)</p>
</li>
<li><p>Target somewhere within $Â±\;2^{19}$ locations, 2 bytes apart (Even address)</p>
<ul>
<li>$Â±\;2^{18}$ 32-bit instructions</li>
</ul>
</li>
<li>Immediate encoding optimized similarly to branch instruction to reduce hardware cost</li>
</ul>
<h4 id="Uses-of-JAL"><a href="#Uses-of-JAL" class="headerlink" title="Uses of JAL"></a>Uses of JAL</h4><ul>
<li>j pseudo-instruction:<ul>
<li><code>j Label = jal x0, Label # Discard return</code></li>
</ul>
</li>
<li>Call function within $2^{18}$ instructions of PC<ul>
<li><code>jal ra, FuncName</code></li>
</ul>
</li>
</ul>
<h4 id="JALR-Instruction-I-Format"><a href="#JALR-Instruction-I-Format" class="headerlink" title="JALR Instruction (I-Format)"></a>JALR Instruction (I-Format)</h4><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gs7lyaw09sj30x6058gm7.jpg" alt="image-20210706074026909"></p>
<ul>
<li><strong>jalr rd, rs, immediate</strong><ul>
<li>Writes PC+4 to <code>rd</code> (<strong>return address</strong>)</li>
<li>Sets PC = <strong>rs + immediate</strong>(sign-extended and set LSB to 0)</li>
<li>Uses same immediates as arithmetic and loads<ul>
<li><strong>no</strong> multiplication by 2 bytes</li>
<li>In contrast to branches and <strong>jal</strong></li>
</ul>
</li>
</ul>
</li>
</ul>
<h5 id="Uses-of-JALR"><a href="#Uses-of-JALR" class="headerlink" title="Uses of JALR"></a>Uses of JALR</h5><ul>
<li><p><strong>ret and jr psuedo-instructions</strong></p>
<ul>
<li><code>ret = jr ra = jalr x0, ra, 0</code></li>
<li>jump to address stored in <code>ra</code> â€” used in the end of the function called inside another function </li>
</ul>
</li>
<li><p><strong>Call function at any 32-bit absolute address</strong></p>
<ul>
<li><p><code>lui x1, &lt;hi20bits&gt;</code></p>
<p> <code>jalr ra, x1, &lt;lo12bits&gt;</code></p>
</li>
</ul>
</li>
<li><p><strong>Jump PC-relative with 32-bit offset</strong></p>
<ul>
<li><p><code>auipc x1, &lt;hi20bits&gt;</code></p>
<p><code>jalr x0, x1, &lt;lo12bits&gt;</code></p>
</li>
</ul>
</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gs7r27qrlfj30r209imyo.jpg" alt="image-20210706103710470" style="zoom:50%;" /></p>
<hr>
<h3 id="Translation-Between-hexdecimal-and-instructions"><a href="#Translation-Between-hexdecimal-and-instructions" class="headerlink" title="Translation Between hexdecimal and instructions"></a>Translation Between hexdecimal and instructions</h3><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gs7r0a6qpkj30is0rojxv.jpg" alt="image-20210706103520577"></p>
<hr>
<h2 id="PC-Addressing"><a href="#PC-Addressing" class="headerlink" title="PC-Addressing"></a>PC-Addressing</h2><h3 id="Questions-on-PC-addressing"><a href="#Questions-on-PC-addressing" class="headerlink" title="Questions on PC-addressing"></a>Questions on PC-addressing</h3><ul>
<li><p><em>Does the value in branch immediate field change if we <strong>move</strong> the code?</em> </p>
<ul>
<li><p>If <strong>moving individual lines</strong> of code, then yes</p>
</li>
<li><p>If moving <strong>all</strong> of code, then no (<u>â€˜position-independent codeâ€™</u>)</p>
</li>
</ul>
</li>
<li><p><em>What do we do if destination is $&gt;2^{10}$ instructions away from branch?</em> å¦‚ä½•è§£å†³æ›´è¿œè·ç¦»çš„è·³è½¬ï¼Ÿ</p>
<ul>
<li><p>Other instructions save us:</p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gs7k122fq5j30nq03sab2.jpg" alt="image-20210706063353468" style="zoom:33%;" /></p>
</li>
<li><p>The jump will have a much longer reach than branches</p>
</li>
<li></li>
</ul>
</li>
</ul>
<h3 id="RISC-V-æŒ‡ä»¤å¯»å€æ¨¡å¼æ€»ç»“"><a href="#RISC-V-æŒ‡ä»¤å¯»å€æ¨¡å¼æ€»ç»“" class="headerlink" title="RISC-V æŒ‡ä»¤å¯»å€æ¨¡å¼æ€»ç»“"></a>RISC-V æŒ‡ä»¤å¯»å€æ¨¡å¼æ€»ç»“</h3><ul>
<li>å¯»å€æ¨¡å¼æŒ‡çš„æ˜¯æŒ‡ä»¤ä¸­å®šä½<strong>æ“ä½œæ•°(operand)</strong>æˆ–è€…<strong>åœ°å€</strong>çš„æ–¹å¼</li>
</ul>
<p><em><img src="https://tva1.sinaimg.cn/large/008i3skNly1gs5f2f5ei6j314c0io7dz.jpg" alt="image-20210704101104930"></em></p>
<hr>
<h2 id="ç®—æœ¯è¿ç®—æŒ‡ä»¤-Arithmetic-Instruction"><a href="#ç®—æœ¯è¿ç®—æŒ‡ä»¤-Arithmetic-Instruction" class="headerlink" title="ç®—æœ¯è¿ç®—æŒ‡ä»¤ Arithmetic Instruction"></a>ç®—æœ¯è¿ç®—æŒ‡ä»¤ Arithmetic Instruction</h2><div class="table-container">
<table>
<thead>
<tr>
<th>æŒ‡ä»¤</th>
<th><em>è¯­æ³•</em></th>
<th><em>æè¿°</em></th>
<th><em>ä¾‹å­</em></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ADD</code></td>
<td>ADD RD, RS1, RS2</td>
<td>RS1 å’Œ RS2 çš„å€¼ç›¸åŠ ï¼Œç»“æœä¿å­˜åˆ° RD</td>
<td>add x5, x6, x7</td>
<td></td>
</tr>
<tr>
<td><code>SUB</code></td>
<td>SUB RD, RS1, RS2</td>
<td>RS1 çš„å€¼å‡å» RS2 çš„å€¼ï¼Œç»“æœä¿å­˜åˆ° RD</td>
<td>sub x5, x6, x7</td>
<td></td>
</tr>
<tr>
<td><code>ADDI</code></td>
<td>ADDI RD, RS1, IMM</td>
<td>RS1 çš„å€¼å’Œ IMM ç›¸åŠ ï¼Œç»“æœä¿å­˜åˆ° RD</td>
<td>addi x5, x6, 100</td>
<td></td>
</tr>
<tr>
<td><code>LUI</code></td>
<td>LUI RD, IMM</td>
<td>æ„é€ ä¸€ä¸ª 32 ä½çš„æ•°ï¼Œé«˜ 20 ä½å­˜æ”¾ IMMï¼Œä½ 12 ä½æ¸… é›¶ã€‚ç»“æœä¿å­˜åˆ° RD</td>
<td>lui x5, 0x12345</td>
<td></td>
</tr>
<tr>
<td><code>AUIPC</code></td>
<td>AUIPC RD, IMM</td>
<td>æ„é€ ä¸€ä¸ª 32 ä½çš„æ•°ï¼Œé«˜ 20 ä½å­˜æ”¾ IMMï¼Œä½ 12 ä½æ¸… é›¶ã€‚ç»“æœå’Œ PC ç›¸åŠ åä¿å­˜åˆ° RD</td>
<td><code>auipc x5, 0x12345</code></td>
</tr>
</tbody>
</table>
</div>
<div class="table-container">
<table>
<thead>
<tr>
<th>ä¼ªæŒ‡ä»¤</th>
<th>è¯­æ³•</th>
<th>ç­‰ä»·æŒ‡ä»¤</th>
<th>æè¿°</th>
<th>ä¾‹å­</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>LI</code></td>
<td>LI RD, IMM</td>
<td>LUI å’Œ ADDI çš„ç»„åˆ</td>
<td>å°†ç«‹å³æ•° IMM åŠ è½½åˆ° RD ä¸­</td>
<td>li x5, 0x12345678</td>
</tr>
<tr>
<td><em><code>LA</code></em></td>
<td><em><code>LA RD, LABEL</code></em></td>
<td>AUIPC å’Œ ADDIçš„ç»„åˆ</td>
<td>ä¸º <code>RD</code> åŠ è½½ä¸€ä¸ªåœ°å€å€¼</td>
<td>la x5 label</td>
</tr>
<tr>
<td><code>NEG</code></td>
<td>NEG RD, RS</td>
<td>SUB RD, x0, RS</td>
<td>å¯¹ RS ä¸­çš„å€¼å–åå¹¶å°†ç»“æœ å­˜æ”¾åœ¨ RD ä¸­</td>
<td>neg x5, x6</td>
</tr>
<tr>
<td><code>MV</code></td>
<td><code>MV RD, RS</code></td>
<td><code>ADDI RD, RS, 0</code></td>
<td>å°† RS ä¸­çš„å€¼æ‹·è´åˆ° RD ä¸­</td>
<td>mv x5, x6</td>
</tr>
<tr>
<td>NOP</td>
<td>NOP</td>
<td>ADDI x0, x0, 0</td>
<td>ä»€ä¹ˆä¹Ÿä¸åš</td>
<td>nop</td>
</tr>
</tbody>
</table>
</div>
<h3 id="addi"><a href="#addi" class="headerlink" title="addi"></a>addi</h3><div class="table-container">
<table>
<thead>
<tr>
<th>è¯­æ³•</th>
<th>ADDI RD, RS1, IMM</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>ä¾‹å­</td>
<td>add x5, x6, 1</td>
<td>x5 = x6 + 1</td>
</tr>
</tbody>
</table>
</div>
<p><em><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gs5hhxrn4sj30uw0cwn3r.jpg" alt="image-20210704113511874" style="zoom:50%;" /></em></p>
<h3 id="LUI-Load-Upper-Immediate"><a href="#LUI-Load-Upper-Immediate" class="headerlink" title="LUI (Load Upper Immediate)"></a>LUI (Load Upper Immediate)</h3><div class="table-container">
<table>
<thead>
<tr>
<th>è¯­æ³•</th>
<th>LUI RD, IMM</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>ä¾‹å­</td>
<td>lui x5, 0x12345</td>
<td>x5 = 0x12345 &lt;&lt; 12</td>
</tr>
</tbody>
</table>
</div>
<ul>
<li><code>LUI</code> æŒ‡ä»¤é‡‡ç”¨ U-typeï¼š <ul>
<li><code>opcode</code> (7): <strong>0b0110111</strong> (LUI)</li>
<li><code>rd</code> (5): â€œdestination registerâ€ ç”¨äºå­˜æ”¾ç»“æœ </li>
<li><code>imm</code> (20): â€œimmediateâ€, ç«‹å³æ•°</li>
</ul>
</li>
<li><code>LUI</code> æŒ‡ä»¤ä¼š<strong>æ„é€ ä¸€ä¸ª 32 bits çš„ç«‹å³æ•°</strong>ï¼Œè¿™ä¸ªç«‹å³æ•°çš„é«˜ 20 ä½å¯¹åº”æŒ‡ä»¤ä¸­çš„ <code>imm</code>ï¼Œä½ 12 ä½æ¸…é›¶ã€‚ è¿™ä¸ªç«‹å³æ•°ä½œä¸ºç»“æœå­˜æ”¾åœ¨ <code>RD</code> ä¸­ã€‚</li>
<li>Can be the first sub-instruction used in <code>la</code></li>
<li>Upper 20 bits set to instruction-type immediate</li>
<li>Stands for â€œLoad Upper Immediateâ€</li>
<li>Lower 12 bits always set to 0</li>
<li><em><code>lui</code> is an U-type instruction (upper immediate); it like all other instructions with a destination register <code>rd</code> will set all 32-bits of the register. However, it is unique in the fact that itâ€™ll set the upper bits to something <strong>other</strong> than 0. This is because it takes the 20-bit immediate and puts it in the upper 20 bits (and the remaining lower 12 bits are set to 0). This is often u<strong>seful when you want to load a 32-bit value (without considering sign/0-extended bits)</strong> into register. Itâ€™s impossible to do with the RISC-V 32-bit architecture as if we need 32 bits for the immediate to load into a register, there is no other available bits to identify <code>rd</code> or instruction type. These two fields fill up the remaining 12 bits (7 bits for opcode, 5 bits for <code>rd</code>).</em></li>
<li><em><code>lui</code> is also considered a <strong><u>0-relative, or absolute, addressing instruction</u></strong>. This means that the U-type immediate it uses is added to 0 instead of the PC (program counter) and thus will address things starting from the â€œstartâ€ of memory as opposed to being an offset to where the current instruction is in memory.</em></li>
<li><em>One of the common ways you might see this instruction used is as the first instruction composing the pseudo-instruction <code>la</code> (load address) along with <code>addi</code> being the second instruction. This is because <code>la</code> takes in a label, and attempts to load the 32-bit address associated with that label; however because we know we <strong>canâ€™t load 32 bits</strong> at a time, we have to break that up so <code>lui</code> takes the upper 20 bits of the address and puts it in <code>rd</code> and the <strong>subsequent <code>addi</code> instruction adds the lower 12 bits to make the 32-bit address</strong>. This is a common way to load other addresses and large immediates as well.</em></li>
<li><strong>Example</strong>:<ul>
<li>åˆ©ç”¨ LUI + ADDI æ¥ä¸ºå¯„å­˜å™¨åŠ è½½ä¸€ä¸ªå¤§æ•° 0x12345678 <ul>
<li><code>lui x1, 0x12345 # x1 = 0x12345000</code> </li>
<li><code>addi x1, x1, 0x678 # x1 = 0x12345678</code></li>
</ul>
</li>
<li>åˆ©ç”¨ LUI + ADDI æ¥ä¸ºå¯„å­˜å™¨åŠ è½½ä¸€ä¸ªå¤§æ•° 0x12345FFF <ul>
<li><code>lui x1, 0x12346 # x1 = 0x12346000</code></li>
<li><code>addi x1, x1, -1 # x1 = 0x12345FFF</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="AUIPC-add-upper-immediate-to-pc"><a href="#AUIPC-add-upper-immediate-to-pc" class="headerlink" title="AUIPC (add upper immediate to pc)"></a>AUIPC (add upper immediate to pc)</h3><div class="table-container">
<table>
<thead>
<tr>
<th>è¯­æ³•</th>
<th>AUIPC RD, IMM</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>ä¾‹å­</td>
<td>auipc x5, 0x12345</td>
<td>x5 = 0x12345 &lt;&lt; 12 + PC</td>
</tr>
</tbody>
</table>
</div>
<ul>
<li><p><code>AUIPC</code> æŒ‡ä»¤é‡‡ç”¨ U-type</p>
</li>
<li><p>å’Œ <code>LUI</code> æŒ‡ä»¤ç±»ä¼¼ï¼Œ<code>AUIPC</code> æŒ‡ä»¤ä¹Ÿä¼šæ„é€ ä¸€ä¸ª 32 bits çš„ç«‹å³æ•°ï¼Œè¿™ä¸ªç«‹å³æ•°çš„é«˜ 20 ä½å¯¹åº”æŒ‡ä»¤ä¸­ çš„ <code>imm</code>ï¼Œä½ 12 ä½æ¸…é›¶ã€‚ä½†å’Œ <code>LUI</code> ä¸åŒçš„æ˜¯ï¼Œ<code>AUIPC</code> ä¼šå…ˆå°†è¿™ä¸ªç«‹å³æ•°å’Œ PC å€¼ç›¸åŠ ï¼Œå°†ç›¸åŠ åçš„ç»“æœå­˜æ”¾åœ¨ <code>RD</code> ä¸­ã€‚</p>
</li>
<li><p><code>auipc</code> stands for â€œAdd Upper Immediate to Program Counterâ€; the presence of â€œprogram counterâ€ indicates that this is a <u><strong>PC-relative instruction</strong></u>, unlike <code>lui</code>. This means that the U-type immediate it uses is added to the <code>PC</code> at that instruction. However, the nuance behind how the immediate is added is that the immediate added to the PC is shifted to the upper 20 bits and the lower 12 bits are zeroed out again. This does not mean that the immediate itself is 32 bits and gets added to <code>PC</code> and <strong>then</strong> the lower 12 bits get zeroed out as the immediate, as with <code>lui</code>, cannot be a full 32 bits due to bit-restrictions.</p>
</li>
<li><p>There are two common ways you might see <code>auipc</code> used. </p>
<ul>
<li><p>The first is similarly to <code>lui</code>, it loads the label in the <code>la</code> pseudo-instruction; the difference between using <code>auipc</code> and <code>lui</code> that one address will be taken as a PC-relative address whilst the latter will be taken as an absolute address (you can also determine this at compile-time with various flags). <strong>NOTE: in 61C (and overall), <code>lui</code> is used when decomposing <code>la</code>; however itâ€™s becoming more and more common to use <code>auipc</code> commonly.</strong></p>
</li>
<li><p>The second common usage is returning to a specific memory address, e.g. using it in conjunction with <code>jalr</code> in order to <strong>return from a function</strong>. The way in which this works is such that <code>auipc</code> will load a PC-relative address into a register, and then <code>jalr</code> can address to an <code>imm</code> number of bytes offset from that address in order to unconditionally jump to a memory location.</p>
</li>
</ul>
</li>
</ul>
<h3 id="LAï¼ˆLoad-Addressï¼‰"><a href="#LAï¼ˆLoad-Addressï¼‰" class="headerlink" title="LAï¼ˆLoad Addressï¼‰"></a>LAï¼ˆLoad Addressï¼‰</h3><div class="table-container">
<table>
<thead>
<tr>
<th>è¯­æ³•</th>
<th>LA RD, LABEL</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>ä¾‹å­</td>
<td>la x5, foo</td>
</tr>
</tbody>
</table>
</div>
<ul>
<li>LAæ˜¯ä¸€ä¸ªä¼ªæŒ‡ä»¤ï¼ˆpseudo-instructionï¼‰</li>
<li>å…·ä½“ç¼–ç¨‹æ—¶ç»™å‡ºéœ€è¦åŠ è½½çš„ <code>label</code>ï¼Œç¼–è¯‘å™¨ä¼šæ ¹æ®å®é™…æƒ…å†µåˆ©ç”¨ <code>auipc</code> å’Œå…¶ä»–æŒ‡ä»¤è‡ªåŠ¨ç”Ÿæˆæ­£ç¡®çš„æŒ‡ä»¤åºåˆ—ã€‚</li>
<li>å¸¸ç”¨äº<strong>åŠ è½½ä¸€ä¸ªå‡½æ•°æˆ–è€…å˜é‡çš„åœ°å€</strong>ã€‚</li>
</ul>
<h3 id="MUL"><a href="#MUL" class="headerlink" title="MUL"></a>MUL</h3><ul>
<li>ç§¯ = è¢«ä¹˜æ•° Ã— ä¹˜æ•°<ul>
<li>å®ƒæ¯”é™¤æ³•è¦æ›´ä¸ºå¤æ‚ï¼Œæ˜¯å› ä¸ºç§¯çš„é•¿åº¦æ˜¯ä¹˜æ•°å’Œè¢«ä¹˜æ•°é•¿åº¦çš„å’Œã€‚å°†ä¸¤ä¸ª 32 ä½æ•°ç›¸ä¹˜å¾—åˆ°çš„æ˜¯ 64 ä½çš„ä¹˜ç§¯ã€‚ä¸ºäº†æ­£ç¡®åœ°å¾—åˆ°ä¸€ä¸ªæœ‰ç¬¦å·æˆ–æ— ç¬¦å·çš„ 64 ä½ç§¯ï¼ŒRISC-V ä¸­å¸¦æœ‰å››ä¸ªä¹˜æ³•æŒ‡ä»¤ã€‚è¦å¾—åˆ°æ•´æ•° 32 ä½ä¹˜ç§¯ï¼ˆ64 ä½ä¸­çš„<strong>ä½ 32 ä½</strong>ï¼‰å°±ç”¨ <code>mul</code> æŒ‡ä»¤ã€‚è¦å¾—åˆ°<strong>é«˜ 32 ä½</strong>ï¼Œå¦‚æœæ“ä½œæ•°éƒ½æ˜¯æœ‰ç¬¦å·æ•°ï¼Œå°±ç”¨ <code>mulh</code> æŒ‡ä»¤ï¼›å¦‚æœæ“ä½œæ•°éƒ½æ˜¯æ— ç¬¦å·æ•°ï¼Œå°±ç”¨ mulhu æŒ‡ä»¤ï¼›å¦‚æœä¸€ä¸ªæœ‰ç¬¦å·ä¸€ä¸ªæ— ç¬¦å·ï¼Œå¯ä»¥ç”¨ mulhsu æŒ‡ä»¤ã€‚åœ¨ä¸€æ¡æŒ‡ä»¤ä¸­å®ŒæˆæŠŠ 64 ä½ç§¯å†™å…¥ä¸¤ä¸ª 32ä½å¯„å­˜å™¨çš„æ“ä½œä¼šä½¿ç¡¬ä»¶è®¾è®¡å˜å¾—å¤æ‚ï¼Œæ‰€ä»¥ RV32M éœ€è¦ä¸¤æ¡ä¹˜æ³•æŒ‡ä»¤æ‰èƒ½å¾—åˆ°ä¸€ä¸ªå®Œæ•´çš„ 64 ä½ç§¯ã€‚</li>
</ul>
</li>
</ul>
<h3 id="åŸºäºç®—æœ¯è¿ç®—æŒ‡ä»¤å®ç°çš„å…¶ä»–ä¼ªæŒ‡ä»¤"><a href="#åŸºäºç®—æœ¯è¿ç®—æŒ‡ä»¤å®ç°çš„å…¶ä»–ä¼ªæŒ‡ä»¤" class="headerlink" title="åŸºäºç®—æœ¯è¿ç®—æŒ‡ä»¤å®ç°çš„å…¶ä»–ä¼ªæŒ‡ä»¤"></a>åŸºäºç®—æœ¯è¿ç®—æŒ‡ä»¤å®ç°çš„å…¶ä»–ä¼ªæŒ‡ä»¤</h3><div class="table-container">
<table>
<thead>
<tr>
<th>ä¼ªæŒ‡ä»¤</th>
<th>è¯­æ³•</th>
<th>ç­‰ä»·æŒ‡ä»¤</th>
<th>æŒ‡ä»¤æè¿°</th>
<th>ä¾‹å­</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>NEG</code></td>
<td><code>NEG RD, RS</code></td>
<td><code>SUB RD, x0, RS</code></td>
<td>å¯¹ RS ä¸­çš„å€¼å–åå¹¶å°†ç»“æœå­˜æ”¾åœ¨ RD ä¸­</td>
<td>neg x5, x6</td>
</tr>
<tr>
<td><code>MV</code></td>
<td><code>MV RD, RS</code></td>
<td><code>ADDI RD, RS, 0</code></td>
<td>å°† <code>RS</code> ä¸­çš„å€¼æ‹·è´åˆ° <code>RD</code> ä¸­</td>
<td>mv x5, x6</td>
</tr>
<tr>
<td><code>NOP</code></td>
<td><code>NOP</code></td>
<td><code>ADDI x0, x0, 0</code></td>
<td>ä»€ä¹ˆä¹Ÿä¸åš</td>
<td>nop</td>
</tr>
</tbody>
</table>
</div>
<hr>
<h3 id="PC-Relative-amp-PC-Absolute"><a href="#PC-Relative-amp-PC-Absolute" class="headerlink" title="PC-Relative &amp; PC-Absolute"></a>PC-Relative &amp; PC-Absolute</h3><p>an instruction with <strong>lui</strong> followed by <strong>jalr</strong> instruction is considered <strong>PC-absolute</strong>, and an instruction with <strong>auipc</strong> followed by <strong>jalr</strong> instruction is considered <strong>PC-relative</strong>.<sup><a href="#fn_1" id="reffn_1">1</a></sup></p>
<blockquote id="fn_1">
<sup>1</sup>. <a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/52574537/risc-v-pc-absolute-vs-pc-relative">https://stackoverflow.com/questions/52574537/risc-v-pc-absolute-vs-pc-relative</a><a href="#reffn_1" title="Jump back to footnote [1] in the text."> &#8617;</a>
</blockquote>
<hr>
<h2 id="ç§»ä½è¿ç®—æŒ‡ä»¤-Shifting-Instructions"><a href="#ç§»ä½è¿ç®—æŒ‡ä»¤-Shifting-Instructions" class="headerlink" title="ç§»ä½è¿ç®—æŒ‡ä»¤ (Shifting Instructions)"></a>ç§»ä½è¿ç®—æŒ‡ä»¤ (Shifting Instructions)</h2><h3 id="é€»è¾‘ç§»ä½"><a href="#é€»è¾‘ç§»ä½" class="headerlink" title="é€»è¾‘ç§»ä½"></a>é€»è¾‘ç§»ä½</h3><ul>
<li>å·¦ç§» â€” ä¹˜æ³•</li>
<li><code>SLL</code>, <code>SRL</code>, and <code>SRA</code> perform logical left, logical right, and arithmetic right shifts on the value in register rs1 by the shift amount held in the <strong>lower 5 bits of register <code>rs2</code></strong>.</li>
</ul>
<p><em><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gs6ai5jp36j30xs0dmdjl.jpg" alt="image-20210705041842923"></em></p>
<h4 id="SLLI"><a href="#SLLI" class="headerlink" title="SLLI"></a>SLLI</h4><ul>
<li><p>Used to <strong>access elements in the array</strong></p>
</li>
<li><p>Left shifting a number $N$ bits produces the same result as multiplying the number by <script type="math/tex">2^N</script>. </p>
<ul>
<li><p>Since a multiply instruction is generally more expensive (slower) than a shift instruction, left shifting is used instead of a multiply instruction as an optimization when possible: if one of the operands is a constant power of two.</p>
</li>
<li><p><strong>Example</strong>:</p>
<p><code>slli</code> is used to calculate the <em>offset</em> into the array <code>save</code>. Since <code>i</code> corresponds to <code>x22</code>, then:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">slli x10,x22,<span class="number">3</span></span><br></pre></td></tr></table></figure>
<p>multiplies the value of <code>i</code> by <em>8</em> (i.e., $2^3$, a power of two) and writes this result to <code>x10</code>.</p>
<p><code>x25</code> indicates the <strong>base address of the array</strong> <code>save</code> â€“ the address of its first element â€“ <code>save[0]</code>. Together with <code>x10</code>, which corresponds to the <em>offset</em>, is used to calculate the address of <code>save[i]</code>:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">add  x10,x10,x25</span><br></pre></td></tr></table></figure>
<p>At this point, <code>x10</code> holds the address of <code>save[i]</code>. That element is eventually loaded into <code>x9</code>:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lw   x9, <span class="number">0</span>(x10)</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h3 id="ç®—æœ¯ç§»ä½"><a href="#ç®—æœ¯ç§»ä½" class="headerlink" title="ç®—æœ¯ç§»ä½"></a>ç®—æœ¯ç§»ä½</h3><p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gs9xhfvc1oj31020c0ady.jpg" alt="image-20210708075032310" style="zoom:80%;" /></p>
<hr>
<h2 id="å†…å­˜è¯»å†™æŒ‡ä»¤"><a href="#å†…å­˜è¯»å†™æŒ‡ä»¤" class="headerlink" title="å†…å­˜è¯»å†™æŒ‡ä»¤"></a>å†…å­˜è¯»å†™æŒ‡ä»¤</h2><h3 id="å†…å­˜è¯»-Load"><a href="#å†…å­˜è¯»-Load" class="headerlink" title="å†…å­˜è¯» (Load)"></a>å†…å­˜è¯» (Load)</h3><ul>
<li><code>sw rs2, imm(rs1)</code><ul>
<li>æŠŠ<code>rs2</code>è¯»å†™åˆ°åœ°å€ä¸º<code>imm+rs1</code>çš„å†…å­˜é‡Œ</li>
</ul>
</li>
<li><p><em><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gs7e4qwbp0j30zm0ckgry.jpg" alt="image-20210706030944037"></em></p>
</li>
<li><p>ç”¨äº function call å¼€å¤´ (prologue)</p>
</li>
<li><p>Example:</p>
<figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># Prologue</span><br><span class="line">addi sp, sp, -<span class="number">36</span></span><br><span class="line">sw s2, <span class="number">0</span>(sp)            # num of elems</span><br><span class="line">sw s3, <span class="number">4</span>(sp) </span><br><span class="line">sw s4, <span class="number">8</span>(sp)</span><br><span class="line">sw s5, <span class="number">12</span>(sp)</span><br><span class="line">sw s6, <span class="number">16</span>(sp)</span><br><span class="line">sw s7, <span class="number">20</span>(sp)</span><br><span class="line">sw s8, <span class="number">24</span>(sp)</span><br><span class="line">sw s9, <span class="number">28</span>(sp)</span><br><span class="line">sw s10, <span class="number">32</span>(sp)</span><br><span class="line">addi s2, a2, <span class="number">0</span> </span><br><span class="line">addi s3, a0, <span class="number">0</span> </span><br><span class="line">addi s4, a1, <span class="number">0</span> </span><br><span class="line">addi s5, x0, <span class="number">0</span> </span><br><span class="line">addi s6, a3, <span class="number">0</span> </span><br></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h3 id="å†…å­˜å†™-store"><a href="#å†…å­˜å†™-store" class="headerlink" title="å†…å­˜å†™ (store)"></a>å†…å­˜å†™ (store)</h3><ul>
<li>æŠŠæ•°æ®å¾€å¤–æ”¾</li>
<li>å¯„å­˜å™¨é‡Œæœ‰å››ä¸ªå­—èŠ‚ï¼Œå¤–é¢æœ‰ä¸€ä¸ªå­—èŠ‚</li>
</ul>
<p><em><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gs6f456bcij310a0dc0yo.jpg" alt="image-20210705065812410"></em></p>
<hr>
<h3 id="æ— æ¡ä»¶è·³è½¬æŒ‡ä»¤ï¼ˆUnconditional-Jump-Instructionsï¼‰"><a href="#æ— æ¡ä»¶è·³è½¬æŒ‡ä»¤ï¼ˆUnconditional-Jump-Instructionsï¼‰" class="headerlink" title="æ— æ¡ä»¶è·³è½¬æŒ‡ä»¤ï¼ˆUnconditional Jump Instructionsï¼‰"></a>æ— æ¡ä»¶è·³è½¬æŒ‡ä»¤ï¼ˆUnconditional Jump Instructionsï¼‰</h3><p>å¦‚æœè·³è½¬åä¸éœ€è¦è¿”å›ï¼Œå¯ä»¥åˆ©ç”¨ x0 ä»£æ›¿ JAL å’Œ JALR ä¸­çš„ RD</p>
<div class="table-container">
<table>
<thead>
<tr>
<th><em>ä¼ªæŒ‡ä»¤</em></th>
<th><em>è¯­æ³•</em></th>
<th><em>ç­‰ä»·æŒ‡ä»¤</em></th>
<th><em>ä¾‹å­</em></th>
</tr>
</thead>
<tbody>
<tr>
<td><em>J</em></td>
<td><em>J OFFSET</em></td>
<td><em>JAL X0, OFFSET</em></td>
<td><em>j leap</em></td>
</tr>
<tr>
<td><em>JR</em></td>
<td><em>JR RS</em></td>
<td><em>JALR X0, 0(RS)</em></td>
<td><em>jr x2</em></td>
</tr>
</tbody>
</table>
</div>
<hr>
<h2 id="åˆ†æ”¯è·³è½¬æŒ‡ä»¤"><a href="#åˆ†æ”¯è·³è½¬æŒ‡ä»¤" class="headerlink" title="åˆ†æ”¯è·³è½¬æŒ‡ä»¤"></a>åˆ†æ”¯è·³è½¬æŒ‡ä»¤</h2><h3 id="æ¡ä»¶åˆ†æ”¯æŒ‡ä»¤ï¼ˆConditional-Branch-Instructionsï¼‰"><a href="#æ¡ä»¶åˆ†æ”¯æŒ‡ä»¤ï¼ˆConditional-Branch-Instructionsï¼‰" class="headerlink" title="æ¡ä»¶åˆ†æ”¯æŒ‡ä»¤ï¼ˆConditional Branch Instructionsï¼‰"></a>æ¡ä»¶åˆ†æ”¯æŒ‡ä»¤ï¼ˆConditional Branch Instructionsï¼‰</h3><ul>
<li><em><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gs7egavjmsj30wq0g4qbr.jpg" alt="image-20210706032055663"></em></li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th>ä¼ªæŒ‡ä»¤</th>
<th>è¯­æ³•</th>
<th>ç­‰ä»·æŒ‡ä»¤</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>BLE</td>
<td>BLE RS, RT, OFFSET</td>
<td>BGE RT, RS, OFFSET</td>
<td>Branch if Less &amp; Equalï¼Œæœ‰ç¬¦å·æ–¹å¼æ¯”è¾ƒï¼Œå¦‚æœ RS &lt;= RTï¼Œè·³ è½¬åˆ° OFFSET</td>
</tr>
<tr>
<td>BLEU</td>
<td>BLEU RS, RT, OFFSET</td>
<td>BGEU RT, RS, OFFSET</td>
<td>Branch if Less or Equal Unsignedï¼Œæ— ç¬¦å·æ–¹å¼æ¯”è¾ƒï¼Œå¦‚æœ RS &lt;= RTï¼Œè·³è½¬åˆ° OFFSET</td>
</tr>
<tr>
<td>BGT</td>
<td>BGT RS, RT, OFFSET</td>
<td>BLT RT, RS, OFFSET</td>
<td>Branch if Greater Thanï¼Œæœ‰ç¬¦å·æ–¹å¼æ¯”è¾ƒï¼Œå¦‚æœ RS &gt; RTï¼Œè·³ è½¬åˆ° OFFSET</td>
</tr>
<tr>
<td>BGTU</td>
<td>BGTU RS, RT, OFFSET</td>
<td>BLTU RT, RS, OFFSET</td>
<td>Branch if Greater Than Unsignedï¼Œæ— ç¬¦å·æ–¹å¼æ¯”è¾ƒï¼Œå¦‚æœ RS &gt; RTï¼Œè·³è½¬åˆ° OFFSET</td>
</tr>
<tr>
<td>BEQZ</td>
<td>BEQZ RS, OFFSET</td>
<td>BEQ RS, x0, OFFSET</td>
<td>Branch if EQual Zero, å¦‚æœ RS == 0ï¼Œè·³è½¬åˆ° OFFSET</td>
</tr>
<tr>
<td>BNEZ</td>
<td>BNEZ RS, OFFSET</td>
<td>BNE RS, x0, OFFSET</td>
<td>Branch if Not Equal Zero, å¦‚æœ RS != 0ï¼Œè·³è½¬åˆ° OFFSET</td>
</tr>
<tr>
<td>BLTZ</td>
<td>BLTZ RS, OFFSET</td>
<td>BLT RS, x0, OFFSET</td>
<td>Branch if Less Than Zero, å¦‚æœ RS &lt; 0ï¼Œè·³è½¬åˆ° OFFSET</td>
</tr>
<tr>
<td>BLEZ</td>
<td>BLEZ RS, OFFSET</td>
<td>BGE x0, RS, OFFSET</td>
<td>Branch if Less or Equal Zero, å¦‚æœ RS &lt;= 0ï¼Œè·³è½¬åˆ° OFFSET</td>
</tr>
<tr>
<td>BGTZ</td>
<td>BGTZ RS, OFFSET</td>
<td>BLT x0, RS, OFFSET</td>
<td>Branch if Greater Than Zeroï¼Œ å¦‚æœ RS &gt; 0ï¼Œè·³è½¬åˆ° OFFSET</td>
</tr>
<tr>
<td>BGEZ</td>
<td>BGEZ RS, OFFSET</td>
<td>BGE RS, x0, OFFSET</td>
<td>Branch if Greater or Equal Zero, å¦‚æœ RS &gt;= 0ï¼Œè·³è½¬åˆ° OFFSET</td>
</tr>
</tbody>
</table>
</div>
<h3 id="RISC-V-Features-n-times-16-bit-Instructions"><a href="#RISC-V-Features-n-times-16-bit-Instructions" class="headerlink" title="RISC-V Features, $n\times 16$-bit Instructions"></a>RISC-V Features, $n\times 16$-bit Instructions</h3><ul>
<li><p>Extensions to RISC-V base ISA support 16-bit compressed instructions and also variable-length instructions that are multiples of 16-bits in length</p>
</li>
<li><p>To enable this, RISC-V <strong>scales the branch offset by 2 bytes</strong> even when there are no 16-bit instructions</p>
</li>
<li><p>Reduces branch reach by half and means that 1/2 of possible targets will be errors on RISC-V processors that only support 32-bit instructions (as used in this class)</p>
</li>
<li><p>RISC-V conditional branches can only reach $Â±\;2^{10} Ã— 32$-bit instructions on either side of PC</p>
</li>
</ul>
<hr>
<h2 id="RISC-V-Immediates"><a href="#RISC-V-Immediates" class="headerlink" title="RISC-V Immediates"></a>RISC-V Immediates</h2><ul>
<li><p><strong>==Immediates==</strong> are <strong>numerical constants</strong>.</p>
</li>
<li><p>They appear often in code, so there are <strong>special instructions</strong> for them.</p>
</li>
<li><p>Add Immediate using <code>addi</code>:</p>
<p><strong><code>addi x3,x4,10</code></strong> (in RISC-V)</p>
<p><code>f = g + 10</code> (in C)</p>
<p>where RISC-V registers <strong>x3</strong>,<strong>x4</strong> are associated with C variables f, g</p>
</li>
<li><p>Syntax similar to add instruction, except that last argument is a number instead of a register.</p>
</li>
<li><p>Always <strong>sign-extended</strong> to make 32-bit instructions</p>
</li>
</ul>
<h3 id="No-Subtract-Immediate"><a href="#No-Subtract-Immediate" class="headerlink" title="No Subtract Immediate"></a>No Subtract Immediate</h3><ul>
<li>There is no Subtract Immediate in RISC-V: Why?<ul>
<li>There are <strong>add</strong> and <strong>sub</strong>, but no <strong>addi</strong> counterpart</li>
</ul>
</li>
<li>Limit types of operations that can be done to absolute minimum<ul>
<li>if an operation can be decomposed into a simpler operation, donâ€™t include it</li>
<li>addi â€¦, -x = â€œsubi â€¦, xâ€ =&gt; so no â€œsubiâ€<ul>
<li><strong><code>addi x3,x4,-10</code></strong> (in RISC-V)</li>
<li><code>f = g - 10</code> (in C)</li>
</ul>
</li>
<li>where RISC-V registers <strong>x3</strong>,<strong>x4</strong> are associated with C variables f, g, respectively</li>
</ul>
</li>
</ul>
<h3 id="Register-Zero"><a href="#Register-Zero" class="headerlink" title="Register Zero"></a>Register Zero</h3><ul>
<li>One particular immediate, the number zero (0), appears very often in code.</li>
<li>So the register zero (x0) is â€˜hard-wiredâ€™ to value 0; e.g.<ul>
<li><strong><code>add x3,x4,x0</code></strong> (in RISC-V)</li>
<li><code>f = g</code> (in C)</li>
<li>where RISC-V registers <strong>x3</strong>,<strong>x4</strong> are associated with C variables f, g</li>
</ul>
</li>
<li>Defined in hardware, so an instruction <strong>add x0,x3,x4</strong> will not do anything!</li>
</ul>
<hr>
<h2 id="Memory-Addresses-are-in-Bytes"><a href="#Memory-Addresses-are-in-Bytes" class="headerlink" title="Memory Addresses are in Bytes"></a>Memory Addresses are in Bytes</h2><ul>
<li>Data typically smaller than 32 bits, but rarely smaller than 8 bits (e.g., char type)â€“works fine if everything is a multiple of 8 bits</li>
<li>8 bit chunk is called a byte (1 word = 4 bytes)</li>
<li>Memory addresses are really in bytes, not words</li>
<li>Word addresses are 4 bytes apart<ul>
<li>Word address is same as address of rightmost byte â€“ least-significant byte (i.e. Little-endian convention)</li>
</ul>
</li>
<li>Data typically smaller than 32 bits, but rarely smaller than 8 bits (e.g., char type)â€“works fine if everything is a multiple of 8 bits</li>
<li>8 bit chunk is called a byte (1 word = 4 bytes)</li>
<li>Memory addresses are really in bytes, not words</li>
<li>Word addresses are 4 bytes apart</li>
<li>Word address is same as address of rightmost byte â€“ least-significant byte (i.e. Little-endian convention)</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
  
  
  


  



      

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      const activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      const commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

    </div>
  </main>

  <footer class="footer">
    <div class="footer-inner">
      

      

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Shuo</span>
</div>

    </div>
  </footer>

  
  <script src="//cdn.jsdelivr.net/npm/animejs@3.2.0/lib/anime.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  















  








  

  

</body>
</html>
